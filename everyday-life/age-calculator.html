<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Age Calculator | Years, Months, Weeks & Days | DailyCalc.org</title>
    <meta name="description" content="Calculate your exact age in years, months, and days. Find out next big life milestone, and total weeks alive with our free Age Calculator.">
    
    <!-- Standard Imports -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css">
    
    <link rel="stylesheet" href="../css/global.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="../js/tailwind-config.js"></script>
    <script src="../js/global.js" defer></script>
    <script src="../js/common-layout.js" defer></script>
    
    <!-- SCHEMA MARKUP -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "Age Calculator",
      "url": "https://dailycalc.org/everyday-life/age-calculator.html",
      "applicationCategory": "UtilityApplication",
      "operatingSystem": "Any",
      "description": "Free Age Calculator to calculate exact chronological age in years, months, and days. Features total weeks analysis and birthday countdowns.",
      "featureList": [
        "Exact Age Calculation",
        "Total Weeks and Days",
        "Next Birthday Countdown",
        "10,000 Day Milestones"
      ],
      "author": {
        "@type": "Organization",
        "name": "DailyCalc.org"
      }
    }
    </script>
    
    <!-- HOW TO SCHEMA -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "HowTo",
      "name": "How to Calculate Your Exact Age Online",
      "description": "A simple guide to finding your precise chronological age in years, months, weeks, and days using the DailyCalc Age Calculator.",
      "step": [
        {
          "@type": "HowToStep",
          "name": "Enter Date of Birth",
          "text": "Locate the 'Date of Birth' field and use the calendar picker to select the exact month, day, and year you were born."
        },
        {
          "@type": "HowToStep",
          "name": "Select Target Date",
          "text": "By default, the 'Age at Date' field is set to today. You can change this to a future date to forecast your age for an upcoming event, or a past date to calculate age at a specific time."
        },
        {
          "@type": "HowToStep",
          "name": "Calculate Results",
          "text": "Click the 'CALCULATE AGE' button. The tool will instantly display your age in years, along with a detailed breakdown of total weeks, days, hours, and minutes lived."
        }
      ]
    }
    </script>
</head>
<body class="bg-slate-50 text-slate-900 font-sans antialiased">
    
    <div id="header-placeholder"></div>
    <main id="calculator-layout"></main>

    <!-- SLOT 1: CALCULATOR INTERFACE -->
    <div id="tool-slot" class="hidden">
        
        <div class="calc-tool-header">
            <i class="fa-solid fa-cake-candles"></i>
            <span class="text-xs font-medium">Calculate your exact chronological age</span>
        </div>

        <!-- UNIVERSAL LAYOUT WRAPPER -->
        <div class="calc-body-wrapper">
            
            <!-- LEFT: INPUT SECTION -->
            <div class="calc-input-section">
                 <form id="ageForm">
                    <div class="mb-4">
                        <label class="block text-xs font-bold text-slate-700 mb-2">Date of Birth</label>
                        <!-- Native Date Picker for Mobile Optimization -->
                        <div class="relative">
                            <input type="date" id="dobInput" class="compact-input w-full pr-2 text-center font-bold text-slate-800 h-10 cursor-pointer" required>
                        </div>
                    </div>

                    <div class="mb-6">
                        <label class="block text-xs font-bold text-slate-700 mb-2">Age at Date (Optional)</label>
                        <div class="relative">
                            <input type="date" id="targetDateInput" class="compact-input w-full pr-2 text-center font-bold text-slate-800 h-10 cursor-pointer">
                            <p class="text-[10px] text-slate-500 mt-1 text-center">Defaults to Today</p>
                        </div>
                    </div>

                    <div class="flex flex-col gap-2">
                        <button type="button" id="calcButton" class="w-full rounded bg-[#518428] py-2.5 text-sm font-bold text-white shadow-md hover:bg-green-700 hover:shadow-lg transition-all">CALCULATE AGE</button>
                        <button type="button" id="clearButton" class="text-[11px] text-slate-500 hover:text-brand-red font-semibold text-center underline decoration-slate-300 hover:decoration-brand-red transition-all">Reset to Today</button>
                    </div>
                 </form>
            </div>

            <!-- RIGHT: OUTPUT SECTION -->
            <div class="calc-output-section">
                 
                 <!-- Main Result Card -->
                 <div class="rounded-lg border border-slate-400 bg-white shadow-lg overflow-hidden flex flex-col">
                    <div class="result-header">
                        <div>
                            <div class="result-label">Your Age</div>
                            <!-- [2025-12-06] Removed manual 'text-xl sm:text-2xl' to use centralized .result-value size -->
                            <div class="result-value" id="resultMain">--</div>
                        </div>
                        <div class="calc-action-group">
                            <button id="saveBtn" class="calc-action-btn dark" title="Save Result"><i class="fa-regular fa-bookmark"></i></button>
                            <button id="shareBtn" class="calc-action-btn dark" title="Copy Link"><i class="fa-solid fa-share-nodes"></i></button>
                        </div>
                    </div>
                    <div class="p-5 bg-white text-center">
                        <p class="text-xs text-slate-500 font-medium uppercase tracking-wide mb-1">In Detail</p>
                        <p class="text-lg font-bold text-slate-800" id="resultDetail">Enter your birth date</p>
                    </div>
                 </div>

                 <!-- Fun Stats Grid -->
                 <div class="grid grid-cols-2 gap-3">
                     <!-- Next Birthday -->
                     <div class="col-span-2 bg-gradient-to-br from-white to-orange-50 border border-orange-100 rounded p-3 shadow-sm flex items-center justify-between">
                        <div>
                            <span class="text-[10px] font-bold text-orange-600 uppercase tracking-wide"><i class="fa-solid fa-gift mr-1"></i> Next Birthday</span>
                            <div class="text-sm font-bold text-slate-800 mt-0.5" id="nextBirthdayDate">--</div>
                        </div>
                        <div class="text-right">
                             <div class="text-xl font-bold text-orange-500" id="nextBirthdayDays">--</div>
                             <div class="text-[9px] text-slate-400 font-medium">days left</div>
                        </div>
                     </div>

                     <!-- Next Milestone Card (Full Width) -->
                     <div class="col-span-2 bg-slate-50 border border-slate-400 rounded p-3 shadow-inner flex flex-col justify-center items-center mb-1">
                        <span class="text-[10px] font-bold text-slate-500 uppercase tracking-wide mb-1">
                            <i class="fa-solid fa-flag-checkered text-brand-green mr-1"></i> Next Milestone
                        </span>
                        <div class="text-xs text-slate-700 text-center">
                            You will turn <span class="font-bold text-brand-dark" id="milestoneDays">--</span> days old on:
                        </div>
                        <div class="text-sm font-bold text-brand-dark mt-1 bg-white px-3 py-1 rounded border border-slate-200" id="milestoneDate">
                            --
                        </div>
                     </div>

                     <!-- Vertically Compact Cards (Horizontal Layout) -->
                     <!-- Total Weeks -->
                     <div class="bg-white border border-slate-300 rounded px-3 py-2 shadow-sm flex items-center justify-between hover:border-slate-400 transition-colors">
                        <span class="text-[10px] font-bold text-slate-500 uppercase tracking-wide">Total Weeks</span>
                        <div class="text-sm font-bold text-slate-900" id="totalWeeks">--</div>
                     </div>

                     <!-- Total Days -->
                     <div class="bg-white border border-slate-300 rounded px-3 py-2 shadow-sm flex items-center justify-between hover:border-slate-400 transition-colors">
                        <span class="text-[10px] font-bold text-slate-500 uppercase tracking-wide">Total Days</span>
                        <div class="text-sm font-bold text-slate-900" id="totalDays">--</div>
                     </div>
                     
                     <!-- Total Hours -->
                     <div class="bg-white border border-slate-300 rounded px-3 py-2 shadow-sm flex items-center justify-between hover:border-slate-400 transition-colors">
                        <span class="text-[10px] font-bold text-slate-500 uppercase tracking-wide">Total Hours</span>
                        <div class="text-sm font-bold text-slate-900" id="totalHours">--</div>
                     </div>

                     <!-- Total Minutes -->
                     <div class="bg-white border border-slate-300 rounded px-3 py-2 shadow-sm flex items-center justify-between hover:border-slate-400 transition-colors">
                        <span class="text-[10px] font-bold text-slate-500 uppercase tracking-wide">Total Mins</span>
                        <div class="text-sm font-bold text-slate-900" id="totalMinutes">--</div>
                     </div>
                 </div>

            </div>
        </div>
    </div>

    <!-- SLOT 2: SEO & GUIDE (EXPANDED) -->
    <div id="seo-slot" class="hidden">
        <div class="content-section">
            <div class="bg-gradient-to-r from-brand-dark to-brand-red px-4 py-3 border-b border-white/10">
                <h2 class="font-bold text-white">Understanding Your Age</h2>
            </div>
            
            <div class="calc-seo-content">
                
                <!-- 1. Intro -->
                <section class="info-card">
                    <h3 class="font-bold text-sm text-brand-dark mb-2 flex items-center gap-2">
                        <i class="fa-solid fa-hourglass-start seo-icon"></i> What is Chronological Age?
                    </h3>
                    <p class="mb-3">Chronological age is the exact amount of time that has passed from your birth to a given date. While it seems simple, counting it precisely involves navigating calendar quirks like <strong>Leap Years</strong> (which occur every 4 years) and varying month lengths (28, 30, or 31 days).</p>
                    <p class="mb-2 text-xs text-slate-600">This tool calculates age based on the Gregorian calendar, the most widely used civil calendar system in the world.</p>
                </section>

                <!-- 2. Use Cases Grid -->
                <section class="info-card">
                    <h3 class="font-bold text-sm text-brand-dark mb-3 flex items-center gap-2">
                        <i class="fa-solid fa-list-check seo-icon"></i> Why Calculate Exact Age?
                    </h3>
                    <div class="grid sm:grid-cols-2 gap-4 text-xs">
                        <div class="feature-card">
                            <div class="mt-0.5"><i class="fa-solid fa-file-contract seo-icon"></i></div>
                            <div>
                                <strong class="text-slate-800 block mb-0.5">Administrative & Legal</strong>
                                <span class="text-slate-600">Checking eligibility for driving licenses (16+), voting (18+), or retirement benefits (65+).</span>
                            </div>
                        </div>
                        <div class="feature-card">
                            <div class="mt-0.5"><i class="fa-solid fa-heart-pulse seo-icon"></i></div>
                            <div>
                                <strong class="text-slate-800 block mb-0.5">Medical Metrics</strong>
                                <span class="text-slate-600">Doctors use precise age (in months) for infant growth charts and to calculate accurate <a href="/health/bmi-calculator.html" class="underline hover:text-brand-red">BMI percentiles</a>.</span>
                            </div>
                        </div>
                        <div class="feature-card">
                            <div class="mt-0.5"><i class="fa-solid fa-graduation-cap seo-icon"></i></div>
                            <div>
                                <strong class="text-slate-800 block mb-0.5">Education & School</strong>
                                <span class="text-slate-600">Determining school grade admission based on "age cut-off" dates (e.g., must be 5 by September 1st).</span>
                            </div>
                        </div>
                        <div class="feature-card">
                            <div class="mt-0.5"><i class="fa-solid fa-champagne-glasses seo-icon"></i></div>
                            <div>
                                <strong class="text-slate-800 block mb-0.5">Fun & Milestones</strong>
                                <span class="text-slate-600">Finding out exactly how many days you've been alive or planning a "10,000th Day" party.</span>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- 3. Technical Breakdown -->
                <div class="grid md:grid-cols-2 gap-6">
                    <section class="info-card bg-slate-100 border-slate-200">
                        <h3 class="font-bold text-sm text-slate-800 mb-2 flex items-center gap-2">
                            <i class="fa-solid fa-calculator seo-icon"></i> The Math Behind It
                        </h3>
                        <p class="mb-2 text-xs text-slate-600">Calculating age manually can be tricky:</p>
                        <ol class="list-decimal pl-4 space-y-1 text-xs text-slate-600">
                            <li>Subtract birth year from current year.</li>
                            <li>If current month < birth month, subtract 1 from years.</li>
                            <li>If current month = birth month but current day < birth day, subtract 1 from years.</li>
                            <li>Calculate remaining months and days, adjusting for the previous month's total days (28/30/31).</li>
                        </ol>
                    </section>

                    <section class="info-card bg-yellow-50/50 border-yellow-100">
                        <h3 class="font-bold text-sm text-yellow-800 mb-2 flex items-center gap-2">
                            <i class="fa-solid fa-calendar-day seo-icon"></i> Leap Year Logic
                        </h3>
                        <p class="text-xs text-yellow-900 leading-relaxed">
                            A year is technically <strong>365.2425 days</strong> long. To account for this quarter-day, we add a 29th day to February every 4 years.
                            <br><br>
                            This calculator counts every Feb 29th you have lived through as an extra day in your "Total Days" count, ensuring mathematical precision.
                        </p>
                    </section>
                </div>

                <!-- 4. Cultural Section -->
                <section class="info-card">
                    <h3 class="font-bold text-sm text-brand-dark mb-2 flex items-center gap-2">
                        <i class="fa-solid fa-earth-asia seo-icon"></i> Cultural Age Differences
                    </h3>
                    <p class="text-xs text-slate-700 mb-3">In most of the world, you are "0" when born and turn "1" after a year. However, age reckoning varies:</p>
                    <div class="space-y-3">
                        <div class="flex gap-3 items-start p-2 rounded hover:bg-slate-50 transition">
                            <div class="font-bold text-brand-red text-xs whitespace-nowrap min-w-[80px]">International</div>
                            <p class="text-xs text-slate-600">Used by this calculator. Age increments on your birth anniversary.</p>
                        </div>
                        <div class="flex gap-3 items-start p-2 rounded hover:bg-slate-50 transition">
                            <div class="font-bold text-brand-red text-xs whitespace-nowrap min-w-[80px]">East Asian</div>
                            <p class="text-xs text-slate-600">Historically in China, Korea, and Vietnam, newborns were considered "1" at birth, and everyone gained a year on Lunar New Year. (South Korea officially switched to the international system in 2023).</p>
                        </div>
                    </div>
                </section>
                
                <!-- NEW GRID 2: Milestones & Trivia -->
                <div class="grid md:grid-cols-2 gap-6">
                    <!-- Left: Global Age Milestones -->
                    <section class="info-card border-brand-red/20 bg-red-50/30">
                        <h3 class="font-bold text-sm text-brand-dark mb-2 flex items-center gap-2">
                            <i class="fa-solid fa-cake-candles seo-icon"></i> Global Age Milestones
                        </h3>
                        <div class="space-y-2 text-xs text-slate-600">
                            <p>Age carries different meanings across cultures:</p>
                            <ul class="list-disc pl-5 space-y-1">
                                <li><strong>Age 15 (Quincea√±era):</strong> In Latin American cultures, this marks the transition from childhood to womanhood.</li>
                                <li><strong>Age 20 (Seijin no Hi):</strong> Japan celebrates "Coming of Age Day" for all new 20-year-olds.</li>
                                <li><strong>Age 60 (Kanreki):</strong> In Japan and Korea, turning 60 symbolizes completing a full zodiac cycle and being "reborn."</li>
                            </ul>
                        </div>
                    </section>

                    <!-- Right: Did You Know? -->
                    <section class="info-card border-blue-100 bg-blue-50/30">
                        <h3 class="font-bold text-sm text-brand-dark mb-2 flex items-center gap-2">
                            <i class="fa-solid fa-lightbulb text-brand-red"></i> Did You Know?
                        </h3>
                        <ul class="space-y-2 text-xs text-slate-600">
                            <li class="leading-tight">
                                <strong class="block text-brand-dark mb-0.5">Time Perception</strong>
                                As you age, time feels faster because each year represents a smaller percentage of your life.
                            </li>
                            <li class="leading-tight">
                                <strong class="block text-brand-dark mb-0.5">Cell Regeneration</strong>
                                Your body replaces most of its cells every 7 to 10 years, meaning you are constantly "renewing."
                            </li>
                            <li class="leading-tight">
                                <strong class="block text-brand-dark mb-0.5">The "27 Club"</strong>
                                A cultural phenomenon noting the high number of popular musicians who died at age 27.
                            </li>
                        </ul>
                    </section>
                </div>

                <!-- NEW GRID 3: How To & Legal Milestones (Requested Update) -->
                <div class="grid md:grid-cols-2 gap-6 mt-6">
                    <!-- Left: How To Use (Pairs with Schema) -->
                    <section class="info-card border-slate-200">
                        <h3 class="font-bold text-sm text-slate-800 mb-2 flex items-center gap-2">
                            <i class="fa-solid fa-circle-question seo-icon"></i> How to Use This Calculator?
                        </h3>
                        <ol class="list-decimal pl-4 space-y-2 text-xs text-slate-600">
                            <li><strong>Enter Birth Date:</strong> Use the date picker to select the exact day you were born.</li>
                            <li><strong>Choose Target Date:</strong> By default, this is today. Change it to calculate your age for a past event or future milestone.</li>
                            <li><strong>Get Results:</strong> Click calculate to see a breakdown of your age in years, months, weeks, and even minutes.</li>
                        </ol>
                    </section>

                    <!-- Right: Common Legal Milestones -->
                    <section class="info-card border-slate-200">
                        <h3 class="font-bold text-sm text-slate-800 mb-2 flex items-center gap-2">
                            <i class="fa-solid fa-gavel seo-icon"></i> Common Legal Milestones (US)
                        </h3>
                        <ul class="space-y-2 text-xs text-slate-600">
                            <li class="flex justify-between border-b border-slate-100 pb-1"><span>Driving Age (Permit)</span> <span class="font-bold text-slate-800">15-16</span></li>
                            <li class="flex justify-between border-b border-slate-100 pb-1"><span>Voting Age</span> <span class="font-bold text-slate-800">18</span></li>
                            <li class="flex justify-between border-b border-slate-100 pb-1"><span>Rental Car Age</span> <span class="font-bold text-slate-800">25</span></li>
                            <li class="flex justify-between"><span>Retirement Benefits</span> <span class="font-bold text-slate-800">62-67</span></li>
                        </ul>
                    </section>
                </div>

                <!-- 5. FAQ Section -->
                <section class="info-card mt-6">
                    <h3 class="font-bold text-slate-800 mb-3 flex items-center gap-2">
                        <i class="fa-solid fa-circle-question seo-icon"></i> Frequently Asked Questions
                    </h3>
                    <div class="space-y-4">
                        <div class="flex gap-3 items-start">
                            <div class="flex-shrink-0 w-5 h-5 rounded-full bg-slate-100 text-slate-600 flex items-center justify-center text-[10px] font-bold border border-slate-200 mt-0.5">1</div>
                            <div>
                                <strong class="block text-[12px] font-bold text-brand-dark mb-1 leading-tight">Can I calculate age for a future date?</strong>
                                <p class="text-xs text-slate-600">Yes. Changing the "Age at Date" field allows you to see how old you (or someone else) will be at a future event, like a graduation in 2030.</p>
                            </div>
                        </div>
                        <div class="flex gap-3 items-start">
                            <div class="flex-shrink-0 w-5 h-5 rounded-full bg-slate-100 text-slate-600 flex items-center justify-center text-[10px] font-bold border border-slate-200 mt-0.5">2</div>
                            <div>
                                <strong class="block text-[12px] font-bold text-brand-dark mb-1 leading-tight">What if I was born on February 29?</strong>
                                <p class="text-xs text-slate-600">If you are a "Leapling," your birthday technically occurs only every 4 years. In non-leap years, most legal systems consider you a year older on March 1st.</p>
                            </div>
                        </div>
                        <div class="flex gap-3 items-start">
                            <div class="flex-shrink-0 w-5 h-5 rounded-full bg-slate-100 text-slate-600 flex items-center justify-center text-[10px] font-bold border border-slate-200 mt-0.5">3</div>
                            <div>
                                <strong class="block text-[12px] font-bold text-brand-dark mb-1 leading-tight">Why is the total weeks count useful?</strong>
                                <p class="text-xs text-slate-600">Viewing your life in weeks (e.g., "4,000 weeks") is a popular productivity and philosophy concept ("Memento Mori") that helps visualize time passing more concretely than years.</p>
                            </div>
                        </div>
                        <div class="flex gap-3 items-start">
                            <div class="flex-shrink-0 w-5 h-5 rounded-full bg-slate-100 text-slate-600 flex items-center justify-center text-[10px] font-bold border border-slate-200 mt-0.5">4</div>
                            <div>
                                <strong class="block text-[12px] font-bold text-brand-dark mb-1 leading-tight">Does this calculate biological age?</strong>
                                <p class="text-xs text-slate-600">No. This tool calculates <em>chronological</em> age (time elapsed). Biological age depends on health markers like cell regeneration, which requires medical testing.</p>
                            </div>
                        </div>
                        <div class="flex gap-3 items-start">
                            <div class="flex-shrink-0 w-5 h-5 rounded-full bg-slate-100 text-slate-600 flex items-center justify-center text-[10px] font-bold border border-slate-200 mt-0.5">5</div>
                            <div>
                                <strong class="block text-[12px] font-bold text-brand-dark mb-1 leading-tight">What is the verified world record for age?</strong>
                                <p class="text-xs text-slate-600">The oldest verified person in recorded history was Jeanne Calment of France, who lived to reach 122 years and 164 days before passing away in 1997.</p>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </div>
    </div>

    <!-- REQUIRED: Footer Placeholder -->
    <div id="footer-placeholder"></div>

    <!-- LOGIC -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // 1. Initialize Layout
            if (typeof CalculatorLayout !== 'undefined') {
                CalculatorLayout.render({ 
                    title: "Age Calculator", 
                    category: "Everyday Life", 
                    toolId: "tool-slot", 
                    seoId: "seo-slot"
                });
            }

            // 2. Elements
            const dobInput = document.getElementById('dobInput');
            const targetDateInput = document.getElementById('targetDateInput');
            const calcBtn = document.getElementById('calcButton');
            const clearBtn = document.getElementById('clearButton');
            const saveBtn = document.getElementById('saveBtn');
            const shareBtn = document.getElementById('shareBtn');
            
            // Output Elements
            const resultMain = document.getElementById('resultMain');
            const resultDetail = document.getElementById('resultDetail');
            const nextBirthdayDate = document.getElementById('nextBirthdayDate');
            const nextBirthdayDays = document.getElementById('nextBirthdayDays');
            const totalWeeksEl = document.getElementById('totalWeeks');
            const totalDaysEl = document.getElementById('totalDays');
            const totalHoursEl = document.getElementById('totalHours');
            const totalMinutesEl = document.getElementById('totalMinutes');
            
            const milestoneDaysEl = document.getElementById('milestoneDays');
            const milestoneDateEl = document.getElementById('milestoneDate');

            // 3. Set Defaults (Today)
            const today = new Date();
            const todayStr = today.toISOString().split('T')[0];
            targetDateInput.value = todayStr;

            // 4. Main Calculation Function
            function calculateAge() {
                const dobVal = dobInput.value;
                const targetVal = targetDateInput.value;

                if (!dobVal) {
                    resetResults("Enter Birth Date");
                    return;
                }

                const dob = new Date(dobVal);
                const target = new Date(targetVal);

                if (dob > target) {
                    resetResults("Date is in future!");
                    return;
                }

                // --- Calculate Year/Month/Day Difference ---
                let years = target.getFullYear() - dob.getFullYear();
                let months = target.getMonth() - dob.getMonth();
                let days = target.getDate() - dob.getDate();

                if (days < 0) {
                    months--;
                    // Get days in previous month
                    const prevMonth = new Date(target.getFullYear(), target.getMonth(), 0);
                    days += prevMonth.getDate();
                }

                if (months < 0) {
                    years--;
                    months += 12;
                }

                // --- Update Main UI ---
                resultMain.textContent = `${years} yrs`;
                resultDetail.textContent = `${years} years, ${months} months, ${days} days`;

                // --- Calculate Totals (Time Diff) ---
                // Set times to midnight to ensure clean day calculation
                const dobTime = new Date(dobVal).setHours(0,0,0,0);
                const targetTime = new Date(targetVal).setHours(0,0,0,0);
                
                const diffTime = Math.abs(targetTime - dobTime);
                const totalDays = Math.floor(diffTime / (1000 * 60 * 60 * 24)); 
                const totalWeeks = Math.floor(totalDays / 7);
                const totalHours = totalDays * 24;
                const totalMinutes = totalHours * 60;

                totalDaysEl.textContent = totalDays.toLocaleString();
                totalWeeksEl.textContent = totalWeeks.toLocaleString();
                totalHoursEl.textContent = totalHours.toLocaleString();
                totalMinutesEl.textContent = totalMinutes.toLocaleString();

                // --- Next Birthday Calculation ---
                const currentYear = target.getFullYear();
                let nextBirthday = new Date(dobVal);
                nextBirthday.setFullYear(currentYear);
                
                // If birthday has passed this year, add 1 to year
                if (nextBirthday < target) {
                    nextBirthday.setFullYear(currentYear + 1);
                }

                const diffBirthday = nextBirthday - target;
                const daysToBirthday = Math.ceil(diffBirthday / (1000 * 60 * 60 * 24));
                
                const options = { weekday: 'long', year: 'numeric', month: 'short', day: 'numeric' };
                nextBirthdayDate.textContent = nextBirthday.toLocaleDateString('en-US', options);
                nextBirthdayDays.textContent = daysToBirthday;

                // --- Milestone Calculation ---
                // Find next multiple of 1000 days from totalDays
                const nextMultiple = Math.ceil((totalDays + 1) / 1000) * 1000;
                // Add the difference to current target date
                const daysToAdd = nextMultiple - totalDays;
                const milestoneDate = new Date(target);
                milestoneDate.setDate(target.getDate() + daysToAdd);
                
                milestoneDaysEl.textContent = nextMultiple.toLocaleString();
                milestoneDateEl.textContent = milestoneDate.toLocaleDateString('en-US', { 
                    weekday: 'short', year: 'numeric', month: 'long', day: 'numeric' 
                });

                // Save to History (if function exists)
                if (window.HistoryManager) {
                    window.HistoryManager.save(
                        "Age Calculator", 
                        `Born: ${dobVal}`, 
                        `${years}y ${months}m`, 
                        window.location.href
                    );
                }
            }

            function resetResults(msg) {
                resultMain.textContent = "--";
                resultDetail.textContent = msg || "Enter your birth date";
                nextBirthdayDate.textContent = "--";
                nextBirthdayDays.textContent = "--";
                totalWeeksEl.textContent = "--";
                totalDaysEl.textContent = "--";
                totalHoursEl.textContent = "--";
                totalMinutesEl.textContent = "--";
                milestoneDaysEl.textContent = "--";
                milestoneDateEl.textContent = "--";
            }

            // 5. Event Listeners
            calcBtn.addEventListener('click', calculateAge);
            dobInput.addEventListener('change', calculateAge);
            targetDateInput.addEventListener('change', calculateAge);
            
            clearBtn.addEventListener('click', () => {
                dobInput.value = '';
                targetDateInput.value = todayStr;
                resetResults();
            });

            // 6. Share & Save
            if(saveBtn) saveBtn.addEventListener('click', () => {
                const age = resultMain.textContent;
                if(age === "--") return;
                const presetName = prompt("Name this person (e.g., 'Mom', 'Best Friend'):");
                if (presetName) {
                    const preset = { 
                        name: presetName, 
                        date: new Date().toISOString(), 
                        inputs: `Born: ${dobInput.value}`, 
                        calculator: 'Age Calculator', 
                        result: resultDetail.textContent, 
                        url: window.location.href 
                    };
                    let allPresets = JSON.parse(localStorage.getItem('dailyCalcPresets')) || {};
                    if (!allPresets['Everyday Life']) allPresets['Everyday Life'] = [];
                    allPresets['Everyday Life'].push(preset);
                    localStorage.setItem('dailyCalcPresets', JSON.stringify(allPresets));
                    
                    // Feedback Animation
                    const originalHtml = saveBtn.innerHTML; 
                    saveBtn.innerHTML = `<i class="fa-solid fa-check text-green-600"></i>`; 
                    setTimeout(() => saveBtn.innerHTML = originalHtml, 2000);
                }
            });

            if(shareBtn) shareBtn.addEventListener('click', () => {
                const params = new URLSearchParams();
                params.set('dob', dobInput.value);
                if(targetDateInput.value !== todayStr) params.set('target', targetDateInput.value);
                
                const shareUrl = `${window.location.origin}${window.location.pathname}?${params.toString()}`;
                
                if (navigator.clipboard && navigator.clipboard.writeText) {
                    navigator.clipboard.writeText(shareUrl).then(() => showShareSuccess());
                } else {
                    prompt("Copy this link:", shareUrl);
                }
            });

            function showShareSuccess() {
                const originalHtml = shareBtn.innerHTML; 
                shareBtn.innerHTML = `<i class="fa-solid fa-check text-green-600"></i>`; 
                setTimeout(() => shareBtn.innerHTML = originalHtml, 2000);
            }

            // 7. Parse URL Params
            const params = new URLSearchParams(window.location.search);
            if(params.has('dob')) {
                dobInput.value = params.get('dob');
                if(params.has('target')) targetDateInput.value = params.get('target');
                calculateAge();
            }
        });
    </script>
</body>
</html>
