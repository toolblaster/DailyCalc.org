<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BMI Calculator & BMR | Healthy Weight & Calories | DailyCalc.org</title>
    <meta name="description" content="Advanced BMI Calculator. Get your Body Mass Index, ideal weight range, and daily BMR calorie needs based on age, gender, and height.">
    
    <!-- Standard Imports -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css">
    
    <link rel="stylesheet" href="../css/global.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="../js/tailwind-config.js"></script>
    <script src="../js/global.js" defer></script>
    <script src="../js/common-layout.js" defer></script>
    
    <!-- SCHEMA MARKUP -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "BMI Calculator",
      "url": "https://dailycalc.org/health/bmi-calculator.html",
      "applicationCategory": "HealthApplication",
      "operatingSystem": "Any",
      "description": "Free BMI Calculator for men and women. Calculate Body Mass Index, ideal weight range, and BMR calories based on age, height, and gender.",
      "browserRequirements": "Requires JavaScript. Works on all modern browsers.",
      "permissions": "None",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "USD"
      },
      "featureList": [
        "BMI Calculation",
        "Ideal Weight Range",
        "BMR (Basal Metabolic Rate)",
        "Interactive Gauge",
        "Imperial and Metric Support"
      ],
      "author": {
        "@type": "Organization",
        "name": "DailyCalc.org"
      }
    }
    </script>
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "FAQPage",
      "mainEntity": [{
        "@type": "Question",
        "name": "Is BMI accurate for athletes?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Not always. BMI does not distinguish between muscle and fat. Athletes with high muscle mass may have a high BMI but very low body fat. In these cases, a Body Fat Calculator is more accurate."
        }
      }, {
        "@type": "Question",
        "name": "What is the \"healthy\" range?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "For most adults, a BMI between 18.5 and 24.9 is considered healthy. This range is associated with the lowest risk of weight-related health issues like diabetes and heart disease."
        }
      }, {
        "@type": "Question",
        "name": "Why does BMI change with age?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Standard BMI categories apply to adults 20+. For children and teens, BMI is age-and-gender specific (percentiles) because they are still growing. Older adults may also have slightly different ideal ranges."
        }
      }, {
        "@type": "Question",
        "name": "Does muscle weigh more than fat?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Technically, a pound is a pound. However, muscle is much more dense than fat. One pound of muscle takes up less space than one pound of fat, which is why you can look leaner but weigh the same."
        }
      }, {
        "@type": "Question",
        "name": "How can I lower my BMI?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "To lower BMI, you need to create a calorie deficit by eating fewer calories than you burn (BMR + Activity). Combining a balanced diet with regular exercise is the safest way to reach a healthy weight."
        }
      }, {
        "@type": "Question",
        "name": "Does BMI measure body fat directly?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "No. BMI is a simple calculation based on height and weight. It correlates with body fat but doesn't measure it directly like skinfold calipers or DEXA scans do."
        }
      }, {
        "@type": "Question",
        "name": "Is BMI valid for all ethnicities?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Health risks may vary by ethnicity. For example, some Asian populations may experience health risks at a lower BMI (often starting at 23 instead of 25), while other groups may have different thresholds."
        }
      }]
    }
    </script>

    <style>
        .bmi-gradient {
            background: linear-gradient(90deg, 
                #3b82f6 0%, #3b82f6 18.5%, 
                #22c55e 18.5%, #22c55e 25%, 
                #eab308 25%, #eab308 30%, 
                #ef4444 30%, #ef4444 100%
            );
        }
        .gauge-marker { transition: left 0.5s cubic-bezier(0.4, 0, 0.2, 1); }
    </style>
</head>
<body class="bg-slate-50 text-slate-900 font-sans antialiased">
    
    <div id="header-placeholder"></div>
    <main id="calculator-layout"></main>

    <!-- TOOL INTERFACE -->
    <div id="tool-slot" class="hidden">
        
        <div class="calc-tool-header">
            <i class="fa-solid fa-weight-scale"></i>
            <span class="text-xs font-medium">BMI, Ideal Weight & Calorie Estimator</span>
        </div>

        <!-- UNIVERSAL LAYOUT WRAPPER -->
        <div class="calc-body-wrapper">
            
            <!-- LEFT: INPUT SECTION -->
            <div class="calc-input-section">
                 
                 <div>
                    <!-- Unit Switcher (Global Preset) -->
                    <div class="flex justify-center mb-4">
                        <div class="inline-flex bg-white rounded-md border border-slate-300 p-0.5 shadow-sm w-full">
                            <label class="cursor-pointer flex-1 text-center py-1.5 rounded text-xs font-bold transition-colors text-brand-dark bg-slate-100 shadow-sm" id="label-imperial">
                                <input type="radio" name="units" value="imperial" checked class="hidden"> US (lbs/ft)
                            </label>
                            <label class="cursor-pointer flex-1 text-center py-1.5 rounded text-xs font-medium transition-colors text-slate-500 hover:text-slate-700" id="label-metric">
                                <input type="radio" name="units" value="metric" class="hidden"> Metric (kg/cm)
                            </label>
                        </div>
                    </div>

                    <!-- Input Grid -->
                    <div class="space-y-4">
                        <!-- Gender -->
                        <div class="flex items-center justify-between">
                            <label class="text-xs font-bold text-slate-700 w-1/3 text-right pr-4">Gender</label>
                            <div class="flex gap-2 w-2/3">
                                <label class="flex-1 cursor-pointer">
                                    <input type="radio" name="gender" value="male" class="peer hidden" checked>
                                    <div class="text-[10px] font-bold text-center py-1.5 border border-slate-300 rounded bg-white text-slate-500 peer-checked:bg-blue-50 peer-checked:text-blue-600 peer-checked:border-blue-300 transition-all">Male</div>
                                </label>
                                <label class="flex-1 cursor-pointer">
                                    <input type="radio" name="gender" value="female" class="peer hidden">
                                    <div class="text-[10px] font-bold text-center py-1.5 border border-slate-300 rounded bg-white text-slate-500 peer-checked:bg-pink-50 peer-checked:text-pink-600 peer-checked:border-pink-300 transition-all">Female</div>
                                </label>
                            </div>
                        </div>
                        <!-- Age -->
                        <div class="flex items-center justify-between">
                            <label class="text-xs font-bold text-slate-700 w-1/3 text-right pr-4">Age</label>
                            <div class="relative w-2/3">
                                <input type="number" id="age" value="30" class="compact-input pr-8 font-bold text-slate-900 w-full" placeholder="0">
                                <span class="absolute right-2 top-1.5 text-[10px] text-slate-500 font-bold">yrs</span>
                            </div>
                        </div>
                        
                        <!-- Weight (With Toggle) -->
                        <div class="flex items-center justify-between">
                            <label class="text-xs font-bold text-slate-700 w-1/3 text-right pr-4">Weight</label>
                            <div class="flex w-2/3 gap-2">
                                <div class="flex-1 relative">
                                    <!-- Imperial (lbs) -->
                                    <div id="weightGroupLbs" class="relative w-full">
                                        <input type="number" id="weightLbs" class="compact-input pr-8 font-bold text-slate-900 w-full" placeholder="0">
                                        <span class="absolute right-2 top-1.5 text-[10px] text-slate-500 font-bold">lbs</span>
                                    </div>
                                    <!-- Metric (kg) -->
                                    <div id="weightGroupKg" class="hidden relative w-full">
                                        <input type="number" id="weightKg" class="compact-input pr-8 font-bold text-slate-900 w-full" placeholder="0">
                                        <span class="absolute right-2 top-1.5 text-[10px] text-slate-500 font-bold">kg</span>
                                    </div>
                                </div>
                                <!-- Toggle Button -->
                                <button type="button" id="btnWeightToggle" class="h-9 w-8 flex-shrink-0 rounded border border-slate-300 bg-slate-50 text-slate-500 hover:text-brand-dark hover:bg-white hover:border-slate-400 transition-all flex justify-center items-center shadow-sm" title="Switch Weight Unit">
                                    <i class="fa-solid fa-repeat text-xs"></i>
                                </button>
                            </div>
                        </div>

                        <!-- Height (With Toggle) -->
                        <div class="flex items-center justify-between">
                            <label class="text-xs font-bold text-slate-700 w-1/3 text-right pr-4">Height</label>
                            <div class="flex w-2/3 gap-2">
                                <!-- Input Wrapper -->
                                <div class="flex-1 relative">
                                    <!-- Imperial Inputs (ft/in) -->
                                    <div id="heightGroupFt" class="flex gap-1 w-full">
                                        <div class="relative w-full">
                                            <input type="number" id="heightFt" class="compact-input pr-5 font-bold text-slate-900 w-full" placeholder="0">
                                            <span class="absolute right-1.5 top-1.5 text-[10px] text-slate-500 font-bold">ft</span>
                                        </div>
                                        <div class="relative w-full">
                                            <input type="number" id="heightIn" class="compact-input pr-5 font-bold text-slate-900 w-full" placeholder="0">
                                            <span class="absolute right-1.5 top-1.5 text-[10px] text-slate-500 font-bold">in</span>
                                        </div>
                                    </div>
                                    <!-- Metric Input (cm) -->
                                    <div id="heightGroupCm" class="hidden relative w-full">
                                        <input type="number" id="heightCm" class="compact-input pr-8 font-bold text-slate-900 w-full" placeholder="0">
                                        <span class="absolute right-2 top-1.5 text-[10px] text-slate-500 font-bold">cm</span>
                                    </div>
                                </div>
                                <!-- Toggle Button -->
                                <button type="button" id="btnHeightToggle" class="h-9 w-8 flex-shrink-0 rounded border border-slate-300 bg-slate-50 text-slate-500 hover:text-brand-dark hover:bg-white hover:border-slate-400 transition-all flex justify-center items-center shadow-sm" title="Switch Height Unit">
                                    <i class="fa-solid fa-repeat text-xs"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                 </div>

                 <!-- Actions -->
                 <div class="mt-6 flex flex-col gap-2">
                    <button type="button" id="calcButton" class="w-full rounded bg-[#518428] py-2.5 text-sm font-bold text-white shadow-md hover:bg-green-700 hover:shadow-lg transition-all focus:ring-2 focus:ring-[#518428] focus:ring-offset-1">CALCULATE</button>
                    <button type="button" id="clearButton" class="text-[11px] text-slate-500 hover:text-brand-red font-semibold text-center underline decoration-slate-300 hover:decoration-brand-red transition-all">Clear & Reset</button>
                 </div>
            </div>

            <!-- RIGHT: OUTPUT SECTION -->
            <div class="calc-output-section">
                 
                 <!-- Top Card -->
                 <div class="rounded-lg border border-slate-400 bg-white shadow-lg overflow-hidden flex flex-col">
                    <div class="result-header">
                        <div>
                            <div class="result-label">Your BMI</div>
                            <div class="result-value" id="resultDisplay">--.-</div>
                        </div>
                        <div class="calc-action-group">
                            <button id="saveBtn" class="calc-action-btn dark" title="Save to Dashboard"><i class="fa-regular fa-bookmark"></i></button>
                            <button id="shareBtn" class="calc-action-btn dark" title="Copy Link"><i class="fa-solid fa-share-nodes"></i></button>
                            <button id="printBtn" class="calc-action-btn dark" title="Print"><i class="fa-solid fa-print"></i></button>
                            <input type="text" id="shareUrlInput" class="hidden">
                        </div>
                    </div>
                    <div class="p-4 bg-white">
                        <div id="resultCategory" class="text-sm font-bold text-slate-400 text-center mb-4">Enter Details</div>
                        <div class="flex-1 w-full flex flex-col justify-center">
                            <!-- Added mt-10 to create vertical space for the popup tooltip so it doesn't overlap text -->
                            <div class="relative h-4 w-full rounded-full bmi-gradient shadow-inner mb-6 mt-10">
                                <div id="gaugeMarker" class="gauge-marker absolute -top-2 left-0 -ml-2 h-0 w-0 border-l-[8px] border-l-transparent border-r-[8px] border-r-transparent border-t-[8px] border-t-slate-800 hidden"></div>
                                 <div id="gaugeLabel" class="gauge-marker absolute -top-8 left-0 -ml-6 w-12 text-center text-[10px] font-bold bg-slate-800 text-white rounded px-1 py-0.5 hidden">
                                    <span id="gaugeValue">--</span>
                                    <div class="absolute bottom-[-4px] left-1/2 -ml-1 h-0 w-0 border-l-[4px] border-l-transparent border-r-[4px] border-r-transparent border-t-[4px] border-t-slate-800"></div>
                                 </div>
                            </div>
                            <div class="flex justify-between text-[9px] font-medium text-slate-500 px-1">
                                <span class="text-blue-600">Under</span><span class="text-green-600 text-center pl-4">Normal</span><span class="text-yellow-600 text-center pr-4">Over</span><span class="text-red-600">Obese</span>
                            </div>
                        </div>
                    </div>
                 </div>

                 <!-- Value-Add Grid -->
                 <div class="grid grid-cols-1 sm:grid-cols-2 gap-3">
                     <!-- Healthy Weight Card -->
                     <div class="calc-output-card">
                        <div class="flex items-center gap-2 mb-1">
                            <div class="bg-green-100 text-green-600 w-6 h-6 rounded-full flex items-center justify-center text-[10px]"><i class="fa-solid fa-scale-balanced"></i></div>
                            <span>Healthy Weight</span>
                        </div>
                        <div class="value" id="idealWeightDisplay">-- - --</div>
                        <p class="text-[10px] text-slate-500 leading-tight mt-1" id="weightAdvice">Enter height to see range.</p>
                     </div>
                     
                     <!-- BMR Card -->
                     <div class="calc-output-card">
                        <div class="flex items-center gap-2 mb-1">
                            <div class="bg-orange-100 text-orange-600 w-6 h-6 rounded-full flex items-center justify-center text-[10px]"><i class="fa-solid fa-fire"></i></div>
                            <span>Daily Burn (BMR)</span>
                        </div>
                        <div class="value" id="bmrDisplay">--</div>
                        <p class="text-[10px] text-slate-500 leading-tight mt-1">Calories/day at rest.</p>
                     </div>
                 </div>

                 <!-- Reference Table -->
                 <div class="flex-1 rounded overflow-hidden calc-output-card !p-0 !block !bg-white border !border-slate-500">
                     <div class="bg-slate-100 px-3 py-2 border-b border-slate-200"><h2 class="text-xs font-bold text-slate-700">Quick Reference</h2></div>
                     <table class="w-full text-xs text-left">
                         <tbody class="divide-y divide-slate-100">
                             <tr id="row-under" class="transition-colors"><td class="px-3 py-2 text-slate-600 font-medium">Underweight</td><td class="px-3 py-2 text-slate-500 text-right">&lt; 18.5</td><td class="px-3 py-2 text-right"><span class="inline-block w-2 h-2 rounded-full bg-blue-500"></span></td></tr>
                             <tr id="row-normal" class="transition-colors"><td class="px-3 py-2 text-slate-600 font-medium">Normal Weight</td><td class="px-3 py-2 text-slate-500 text-right">18.5 – 24.9</td><td class="px-3 py-2 text-right"><span class="inline-block w-2 h-2 rounded-full bg-green-500"></span></td></tr>
                             <tr id="row-over" class="transition-colors"><td class="px-3 py-2 text-slate-600 font-medium">Overweight</td><td class="px-3 py-2 text-slate-500 text-right">25.0 – 29.9</td><td class="px-3 py-2 text-right"><span class="inline-block w-2 h-2 rounded-full bg-yellow-500"></span></td></tr>
                             <tr id="row-obese" class="transition-colors"><td class="px-3 py-2 text-slate-600 font-medium">Obesity</td><td class="px-3 py-2 text-slate-500 text-right">&ge; 30.0</td><td class="px-3 py-2 text-right"><span class="inline-block w-2 h-2 rounded-full bg-red-500"></span></td></tr>
                         </tbody>
                     </table>
                 </div>

            </div>
        </div>
    </div>

    <!-- SEO & GUIDE -->
    <div id="seo-slot" class="hidden">
        <div class="content-section">
            <div class="bg-gradient-to-r from-brand-dark to-brand-red px-4 py-3 border-b border-white/10">
                <h2 class="font-bold text-white">The Ultimate BMI Guide</h2>
            </div>
            <!-- Using new Universal SEO Wrapper -->
            <div class="calc-seo-content">
                
                <!-- 1. INTRO & DEFINITION -->
                <section class="info-card">
                    <h3 class="font-bold text-sm text-brand-dark mb-2 flex items-center gap-2">
                        <i class="fa-solid fa-circle-info seo-icon"></i> What is Body Mass Index (BMI)?
                    </h3>
                    <p class="mb-3">Body Mass Index (BMI) is a widely used screening tool that estimates body fat based on a person's <strong>weight</strong> relative to their <strong>height</strong>. Invented by Adolphe Quetelet in the 1830s, it remains the standard metric for health organizations like the WHO and CDC to categorize weight status.</p>
                    <p class="mb-2">While it doesn't measure body fat directly (like a caliper scan), it correlates strongly with direct measures. Health professionals use it to screen for weight categories that may lead to health problems.</p>
                </section>

                <!-- 2. MANUAL CALCULATION (Featured Snippet Bait) -->
                <section class="info-card">
                    <h3 class="font-bold text-sm text-brand-dark mb-3 flex items-center gap-2">
                        <i class="fa-solid fa-calculator seo-icon"></i> How to Calculate BMI Manually
                    </h3>
                    <div class="grid sm:grid-cols-2 gap-4">
                        <!-- Metric -->
                        <div class="bg-white p-3 rounded border border-slate-300">
                            <strong class="text-xs text-brand-dark block mb-2 border-b border-slate-100 pb-1">Metric Formula (kg/m²)</strong>
                            <ol class="list-decimal pl-4 space-y-1 text-xs text-slate-600">
                                <li>Measure your weight in kilograms (kg).</li>
                                <li>Measure your height in meters (m).</li>
                                <li>Square your height (m &times; m).</li>
                                <li>Divide weight by squared height.</li>
                            </ol>
                            <div class="mt-2 bg-slate-50 p-2 rounded text-center font-serif italic text-slate-800 text-xs">
                                BMI = kg / m²
                            </div>
                        </div>
                        <!-- Imperial -->
                        <div class="bg-white p-3 rounded border border-slate-300">
                            <strong class="text-xs text-brand-dark block mb-2 border-b border-slate-100 pb-1">Imperial Formula (lb/in²)</strong>
                            <ol class="list-decimal pl-4 space-y-1 text-xs text-slate-600">
                                <li>Measure your weight in pounds (lb).</li>
                                <li>Measure height in inches (in).</li>
                                <li>Square your height (in &times; in).</li>
                                <li>Divide weight by height squared, then <strong>multiply by 703</strong>.</li>
                            </ol>
                            <div class="mt-2 bg-slate-50 p-2 rounded text-center font-serif italic text-slate-800 text-xs">
                                BMI = 703 &times; (lb / in²)
                            </div>
                        </div>
                    </div>
                </section>

                <!-- 3. INTERPRETING RESULTS -->
                <section class="info-card">
                    <h3 class="font-bold text-sm text-brand-dark mb-3 flex items-center gap-2"><i class="fa-solid fa-table seo-icon"></i> Understanding Your Result</h3>
                    <p class="mb-3">For most adults (ages 20+), BMI falls into one of the following standard categories established by the World Health Organization (WHO):</p>
                    <div class="overflow-x-auto border border-slate-300 rounded-lg shadow-sm bg-white">
                        <table class="w-full text-left border-collapse">
                            <thead><tr class="bg-slate-100 border-b border-slate-300 text-slate-700"><th class="px-3 py-2 font-bold">Category</th><th class="px-3 py-2 font-bold">BMI Range</th><th class="px-3 py-2 font-bold">Meaning</th></tr></thead>
                            <tbody class="divide-y divide-slate-100">
                                <tr class="hover:bg-blue-50/50"><td class="px-3 py-2 font-medium text-blue-700">Underweight</td><td class="px-3 py-2">&lt; 18.5</td><td class="px-3 py-2 text-slate-500">Possible malnutrition</td></tr>
                                <tr class="hover:bg-green-50/50"><td class="px-3 py-2 font-medium text-green-700">Normal</td><td class="px-3 py-2 font-bold text-slate-800">18.5 – 24.9</td><td class="px-3 py-2 text-slate-500">Lowest health risk</td></tr>
                                <tr class="hover:bg-yellow-50/50"><td class="px-3 py-2 font-medium text-yellow-700">Overweight</td><td class="px-3 py-2">25.0 – 29.9</td><td class="px-3 py-2 text-slate-500">Increased cardiac load</td></tr>
                                <tr class="hover:bg-red-50/50"><td class="px-3 py-2 font-medium text-red-600">Obesity (I, II, III)</td><td class="px-3 py-2">&ge; 30.0</td><td class="px-3 py-2 text-slate-500">High risk of disease</td></tr>
                            </tbody>
                        </table>
                    </div>
                </section>

                <!-- 4. MEN vs WOMEN vs AGE -->
                <section class="info-card">
                    <h3 class="font-bold text-sm text-brand-dark mb-3 flex items-center gap-2">
                        <i class="fa-solid fa-venus-mars seo-icon"></i> BMI Differences by Group
                    </h3>
                    <div class="space-y-3">
                        <div class="flex gap-3">
                            <div class="flex-shrink-0 w-8 h-8 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center"><i class="fa-solid fa-person"></i></div>
                            <div>
                                <strong class="text-xs text-brand-dark">Men vs. Women</strong>
                                <p class="text-xs text-slate-600 mt-0.5">The formula is the <strong>same</strong> for both. However, women naturally have more body fat than men at the same BMI. Men tend to have more muscle mass, which can sometimes skew results (making them appear overweight when they are muscular).</p>
                            </div>
                        </div>
                        <div class="flex gap-3">
                            <div class="flex-shrink-0 w-8 h-8 rounded-full bg-purple-100 text-purple-600 flex items-center justify-center"><i class="fa-solid fa-person-cane"></i></div>
                            <div>
                                <strong class="text-xs text-brand-dark">Seniors (65+)</strong>
                                <p class="text-xs text-slate-600 mt-0.5">Older adults often lose muscle mass. A slightly higher BMI (25-27) is sometimes considered protective against osteoporosis and frailty in this age group.</p>
                            </div>
                        </div>
                        <div class="flex gap-3">
                            <div class="flex-shrink-0 w-8 h-8 rounded-full bg-green-100 text-green-600 flex items-center justify-center"><i class="fa-solid fa-child-reaching"></i></div>
                            <div>
                                <strong class="text-xs text-brand-dark">Children & Teens (2-19)</strong>
                                <p class="text-xs text-slate-600 mt-0.5">Do not use adult charts! Kids are growing, so their BMI is compared against percentiles for their specific age and gender (e.g., "95th percentile").</p>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- 5. HEALTH RISKS -->
                <div class="grid md:grid-cols-2 gap-6">
                    <!-- Restored red border (using 200 for better visibility) -->
                    <section class="info-card bg-red-50/30 border-red-200">
                        <h3 class="font-bold text-sm text-red-700 mb-2 flex items-center gap-2"><i class="fa-solid fa-arrow-trend-up"></i> Risks of High BMI</h3>
                        <p class="mb-2 text-xs text-slate-600">Excess weight puts strain on your organs and joints. Common associated conditions:</p>
                        <ul class="list-disc pl-5 space-y-1 text-slate-600 text-xs">
                            <li>Type 2 Diabetes</li>
                            <li>Hypertension (High Blood Pressure)</li>
                            <li>Heart Disease & Stroke</li>
                            <li>Sleep Apnea</li>
                            <li>Osteoarthritis</li>
                        </ul>
                    </section>
                    <!-- Restored blue border (using 200 for better visibility) -->
                    <section class="info-card bg-blue-50/30 border-blue-200">
                        <h3 class="font-bold text-sm text-blue-700 mb-2 flex items-center gap-2"><i class="fa-solid fa-arrow-trend-down"></i> Risks of Low BMI</h3>
                        <p class="mb-2 text-xs text-slate-600">Being underweight indicates possible nutritional deficiencies. Risks include:</p>
                        <ul class="list-disc pl-5 space-y-1 text-slate-600 text-xs">
                            <li>Weakened Immune System</li>
                            <li>Osteoporosis (Brittle Bones)</li>
                            <li>Iron-deficiency Anemia</li>
                            <li>Fertility Issues</li>
                            <li>Chronic Fatigue</li>
                        </ul>
                    </section>
                </div>

                <!-- 6. ACTION PLAN -->
                <section class="info-card">
                    <h3 class="font-bold text-sm text-brand-dark mb-3 flex items-center gap-2">
                        <i class="fa-solid fa-person-walking seo-icon"></i> Tips for a Healthy Weight
                    </h3>
                    <div class="grid sm:grid-cols-2 gap-4 text-xs">
                        <div>
                            <strong class="text-slate-800 block mb-1">To Lose Weight:</strong>
                            <ul class="space-y-1 text-slate-600">
                                <li><i class="fa-solid fa-check text-green-500 mr-1"></i> Create a calorie deficit (burn more than you eat).</li>
                                <li><i class="fa-solid fa-check text-green-500 mr-1"></i> Prioritize protein and fiber to stay full.</li>
                                <li><i class="fa-solid fa-check text-green-500 mr-1"></i> Aim for 150 mins of moderate activity per week.</li>
                            </ul>
                        </div>
                        <div>
                            <strong class="text-slate-800 block mb-1">To Gain Weight:</strong>
                            <ul class="space-y-1 text-slate-600">
                                <li><i class="fa-solid fa-check text-green-500 mr-1"></i> Eat calorie-dense, nutrient-rich foods (nuts, avocados).</li>
                                <li><i class="fa-solid fa-check text-green-500 mr-1"></i> Eat more frequently (5-6 small meals).</li>
                                <li><i class="fa-solid fa-check text-green-500 mr-1"></i> Strength train to build muscle, not just fat.</li>
                            </ul>
                        </div>
                    </div>
                </section>

                <!-- 7. LIMITATIONS -->
                <section class="info-card bg-slate-100">
                    <h3 class="font-bold text-sm text-slate-700 mb-2 flex items-center gap-2">
                        <i class="fa-solid fa-triangle-exclamation text-yellow-600"></i> Limitations of BMI
                    </h3>
                    <p class="text-xs text-slate-600 mb-2">BMI is a simple tool, not a diagnostic one. It fails to distinguish between:</p>
                    <ul class="list-disc pl-5 text-xs text-slate-600 space-y-1">
                        <li><strong>Muscle vs. Fat:</strong> Bodybuilders may be classified as "Obese" despite having low body fat.</li>
                        <li><strong>Bone Density:</strong> People with dense bones may weigh more.</li>
                        <li><strong>Fat Distribution:</strong> It doesn't track visceral fat (belly fat), which is more dangerous than subcutaneous fat.</li>
                    </ul>
                    <p class="text-xs text-slate-500 mt-2 italic"><strong>Pro Tip:</strong> Use BMI alongside other metrics like Waist-to-Hip Ratio and Body Fat Percentage for a complete picture.</p>
                </section>

                <!-- 8. FAQ -->
                <section class="info-card">
                    <h3 class="font-bold text-slate-800 mb-3 flex items-center gap-2">
                        <i class="fa-solid fa-circle-question seo-icon"></i> Frequently Asked Questions
                    </h3>
                    <div class="space-y-4">
                        <div class="flex gap-3 items-start">
                            <div class="flex-shrink-0 w-5 h-5 rounded-full bg-slate-100 text-slate-600 flex items-center justify-center text-[10px] font-bold border border-slate-200 mt-0.5">1</div>
                            <div>
                                <h4 class="text-[12px] font-bold text-brand-dark mb-1 leading-tight">What is a good BMI for my age?</h4>
                                <p class="text-xs text-slate-600">For adults 20-65, the target is 18.5 - 24.9. After age 65, a slightly higher range (up to 27) may be acceptable to preserve muscle mass and bone density.</p>
                            </div>
                        </div>
                        <div class="flex gap-3 items-start">
                            <div class="flex-shrink-0 w-5 h-5 rounded-full bg-slate-100 text-slate-600 flex items-center justify-center text-[10px] font-bold border border-slate-200 mt-0.5">2</div>
                            <div>
                                <h4 class="text-[12px] font-bold text-brand-dark mb-1 leading-tight">Is BMI different for males and females?</h4>
                                <p class="text-xs text-slate-600">The calculation is identical. However, women naturally carry more essential body fat than men, so a woman and a man with the same BMI will likely have different body compositions.</p>
                            </div>
                        </div>
                        <div class="flex gap-3 items-start">
                            <div class="flex-shrink-0 w-5 h-5 rounded-full bg-slate-100 text-slate-600 flex items-center justify-center text-[10px] font-bold border border-slate-200 mt-0.5">3</div>
                            <div>
                                <h4 class="text-[12px] font-bold text-brand-dark mb-1 leading-tight">Can I have a high BMI and be healthy?</h4>
                                <p class="text-xs text-slate-600">Yes, if the weight comes from lean muscle rather than fat (e.g., athletes). However, for the general population, a high BMI is strongly linked to health risks.</p>
                            </div>
                        </div>
                        <div class="flex gap-3 items-start">
                            <div class="flex-shrink-0 w-5 h-5 rounded-full bg-slate-100 text-slate-600 flex items-center justify-center text-[10px] font-bold border border-slate-200 mt-0.5">4</div>
                            <div>
                                <h4 class="text-[12px] font-bold text-brand-dark mb-1 leading-tight">Does BMI measure body fat directly?</h4>
                                <p class="text-xs text-slate-600">No. BMI is a simple calculation based on height and weight. It correlates with body fat but doesn't measure it directly like skinfold calipers or DEXA scans do.</p>
                            </div>
                        </div>
                        <div class="flex gap-3 items-start">
                            <div class="flex-shrink-0 w-5 h-5 rounded-full bg-slate-100 text-slate-600 flex items-center justify-center text-[10px] font-bold border border-slate-200 mt-0.5">5</div>
                            <div>
                                <h4 class="text-[12px] font-bold text-brand-dark mb-1 leading-tight">Is BMI valid for all ethnicities?</h4>
                                <p class="text-xs text-slate-600">Health risks may vary by ethnicity. For example, some Asian populations may experience health risks at a lower BMI (often starting at 23 instead of 25).</p>
                            </div>
                        </div>
                    </div>
                </section>

            </div>
        </div>
    </div>
    
    <div id="footer-placeholder"></div>

    <!-- LOGIC -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            if (typeof CalculatorLayout !== 'undefined') {
                CalculatorLayout.render({ title: "BMI Calculator", category: "Health", toolId: "tool-slot", seoId: "seo-slot" });
            }
            const els = {
                radios: document.getElementsByName('units'),
                labels: { imperial: document.getElementById('label-imperial'), metric: document.getElementById('label-metric') },
                genderRadios: document.getElementsByName('gender'),
                age: document.getElementById('age'),
                // New Weight Elements
                weightLbs: document.getElementById('weightLbs'),
                weightKg: document.getElementById('weightKg'),
                weightGroupLbs: document.getElementById('weightGroupLbs'),
                weightGroupKg: document.getElementById('weightGroupKg'),
                btnWeightToggle: document.getElementById('btnWeightToggle'),
                // New Height Elements
                heightFt: document.getElementById('heightFt'),
                heightIn: document.getElementById('heightIn'),
                heightCm: document.getElementById('heightCm'),
                heightGroupFt: document.getElementById('heightGroupFt'), 
                heightGroupCm: document.getElementById('heightGroupCm'), 
                btnHeightToggle: document.getElementById('btnHeightToggle'),
                btn: document.getElementById('calcButton'),
                clear: document.getElementById('clearButton'),
                display: document.getElementById('resultDisplay'),
                catText: document.getElementById('resultCategory'),
                marker: document.getElementById('gaugeMarker'),
                gaugeLabel: document.getElementById('gaugeLabel'),
                gaugeValue: document.getElementById('gaugeValue'),
                idealWeight: document.getElementById('idealWeightDisplay'),
                weightAdvice: document.getElementById('weightAdvice'),
                bmrDisplay: document.getElementById('bmrDisplay'),
                rows: { under: document.getElementById('row-under'), normal: document.getElementById('row-normal'), over: document.getElementById('row-over'), obese: document.getElementById('row-obese') },
                saveBtn: document.getElementById('saveBtn'),
                shareBtn: document.getElementById('shareBtn'),
                printBtn: document.getElementById('printBtn'),
                shareInput: document.getElementById('shareUrlInput')
            };

            // Toggle Global Units (Presets)
            function toggleGlobalUnits() {
                const isMetric = Array.from(els.radios).find(r => r.checked).value === 'metric';
                if (isMetric) {
                    // Update Styles
                    els.labels.metric.classList.add('bg-slate-100', 'shadow-sm', 'text-brand-dark', 'font-bold'); 
                    els.labels.metric.classList.remove('text-slate-500', 'font-medium');
                    els.labels.imperial.classList.remove('bg-slate-100', 'shadow-sm', 'text-brand-dark', 'font-bold'); 
                    els.labels.imperial.classList.add('text-slate-500', 'font-medium');
                    
                    // Set Local Toggles
                    els.heightGroupFt.classList.add('hidden');
                    els.heightGroupCm.classList.remove('hidden');
                    els.weightGroupLbs.classList.add('hidden');
                    els.weightGroupKg.classList.remove('hidden');
                } else {
                    // Update Styles
                    els.labels.imperial.classList.add('bg-slate-100', 'shadow-sm', 'text-brand-dark', 'font-bold'); 
                    els.labels.imperial.classList.remove('text-slate-500', 'font-medium');
                    els.labels.metric.classList.remove('bg-slate-100', 'shadow-sm', 'text-brand-dark', 'font-bold'); 
                    els.labels.metric.classList.add('text-slate-500', 'font-medium');
                    
                    // Set Local Toggles
                    els.heightGroupFt.classList.remove('hidden');
                    els.heightGroupCm.classList.add('hidden');
                    els.weightGroupLbs.classList.remove('hidden');
                    els.weightGroupKg.classList.add('hidden');
                }
                calculate();
            }

            // Height Unit Toggle
            if(els.btnHeightToggle) {
                els.btnHeightToggle.addEventListener('click', () => {
                    const isCmVisible = !els.heightGroupCm.classList.contains('hidden');
                    if (isCmVisible) {
                        // Switch TO Ft/In
                        els.heightGroupCm.classList.add('hidden');
                        els.heightGroupFt.classList.remove('hidden');
                        const cm = parseFloat(els.heightCm.value);
                        if(cm) {
                            const totalInches = cm / 2.54;
                            const feet = Math.floor(totalInches / 12);
                            const inches = Math.round(totalInches % 12);
                            els.heightFt.value = feet;
                            els.heightIn.value = inches;
                        }
                    } else {
                        // Switch TO Cm
                        els.heightGroupFt.classList.add('hidden');
                        els.heightGroupCm.classList.remove('hidden');
                        const ft = parseFloat(els.heightFt.value) || 0;
                        const inc = parseFloat(els.heightIn.value) || 0;
                        if(ft || inc) {
                            const cm = Math.round(((ft * 12) + inc) * 2.54);
                            els.heightCm.value = cm;
                        }
                    }
                    calculate();
                });
            }

            // Weight Unit Toggle
            if(els.btnWeightToggle) {
                els.btnWeightToggle.addEventListener('click', () => {
                    const isKgVisible = !els.weightGroupKg.classList.contains('hidden');
                    if(isKgVisible) {
                        // Switch TO Lbs
                        els.weightGroupKg.classList.add('hidden');
                        els.weightGroupLbs.classList.remove('hidden');
                        const kg = parseFloat(els.weightKg.value);
                        if(kg) {
                            els.weightLbs.value = (kg * 2.20462).toFixed(1);
                        }
                    } else {
                        // Switch TO Kg
                        els.weightGroupLbs.classList.add('hidden');
                        els.weightGroupKg.classList.remove('hidden');
                        const lbs = parseFloat(els.weightLbs.value);
                        if(lbs) {
                            els.weightKg.value = (lbs / 2.20462).toFixed(1);
                        }
                    }
                    calculate();
                });
            }

            els.radios.forEach(r => r.addEventListener('change', toggleGlobalUnits));

            function calculate() {
                const gender = Array.from(els.genderRadios).find(r => r.checked).value;
                const age = parseFloat(els.age.value) || 0;
                
                // Get Weight (Normalized to Kg)
                let weightKg = 0;
                const isKgInputVisible = !els.weightGroupKg.classList.contains('hidden');
                
                if (isKgInputVisible) {
                     const kg = parseFloat(els.weightKg.value);
                     if (!kg || kg <= 0) { resetResult(); return; }
                     weightKg = kg;
                } else {
                     const lbs = parseFloat(els.weightLbs.value);
                     if (!lbs || lbs <= 0) { resetResult(); return; }
                     weightKg = lbs * 0.453592;
                }
                
                // Get Height (Normalized to Meters)
                let heightM = 0;
                let heightCmVal = 0;
                const isCmInputVisible = !els.heightGroupCm.classList.contains('hidden');

                if (isCmInputVisible) {
                    let cm = parseFloat(els.heightCm.value); 
                    if (!cm) { resetResult(); return; }
                    heightCmVal = cm; 
                    heightM = cm / 100;
                } else {
                    let ft = parseFloat(els.heightFt.value) || 0; 
                    let inch = parseFloat(els.heightIn.value) || 0;
                    if (ft === 0 && inch === 0) { resetResult(); return; }
                    let totalInches = (ft * 12) + inch; 
                    heightCmVal = totalInches * 2.54; 
                    heightM = heightCmVal / 100;
                }

                let bmi = weightKg / (heightM * heightM);
                displayBMI(bmi);

                // Ideal Weight Range
                let minKg = 18.5 * (heightM * heightM); 
                let maxKg = 24.9 * (heightM * heightM);
                let rangeText = ""; 
                let adviceText = "";

                // Display Ideal Weight in selected unit
                if (isKgInputVisible) {
                    rangeText = `${minKg.toFixed(1)} - ${maxKg.toFixed(1)} kg`;
                    if (weightKg < minKg) adviceText = `Gain ${(minKg - weightKg).toFixed(1)} kg`; 
                    else if (weightKg > maxKg) adviceText = `Lose ${(weightKg - maxKg).toFixed(1)} kg`; 
                    else adviceText = "You are in the healthy range!";
                } else {
                    let minLbs = minKg * 2.20462; 
                    let maxLbs = maxKg * 2.20462;
                    // Reference original weightLbs input for context
                    const weightValLbs = parseFloat(els.weightLbs.value);
                    rangeText = `${Math.round(minLbs)} - ${Math.round(maxLbs)} lbs`;
                    if (weightValLbs < minLbs) adviceText = `Gain ${Math.round(minLbs - weightValLbs)} lbs`; 
                    else if (weightValLbs > maxLbs) adviceText = `Lose ${Math.round(weightValLbs - maxLbs)} lbs`; 
                    else adviceText = "You are in the healthy range!";
                }
                els.idealWeight.textContent = rangeText; 
                els.weightAdvice.textContent = adviceText;

                // BMR Calc (Mifflin-St Jeor)
                let bmr = (10 * weightKg) + (6.25 * heightCmVal) - (5 * age);
                if (gender === 'male') bmr += 5; else bmr -= 161;
                els.bmrDisplay.textContent = Math.round(bmr).toLocaleString();
            }

            function displayBMI(bmi) {
                if (!isFinite(bmi) || isNaN(bmi) || bmi <= 0) { resetResult(); return; }
                const val = bmi.toFixed(1);
                els.display.textContent = val; 
                els.gaugeValue.textContent = val;

                let category = ""; let colorClass = ""; let activeRowId = ""; let percent = 0;
                const minScale = 14; const maxScale = 35;
                percent = ((bmi - minScale) / (maxScale - minScale)) * 100;
                if (percent < 0) percent = 0; if (percent > 100) percent = 100;

                if (bmi < 18.5) { category = "Underweight"; colorClass = "text-blue-600"; activeRowId = "under"; }
                else if (bmi < 25) { category = "Normal Weight"; colorClass = "text-green-600"; activeRowId = "normal"; }
                else if (bmi < 30) { category = "Overweight"; colorClass = "text-yellow-600"; activeRowId = "over"; }
                else { category = "Obesity"; colorClass = "text-red-600"; activeRowId = "obese"; }

                els.catText.textContent = category; 
                els.catText.className = `text-sm font-bold mt-2 ${colorClass}`;
                els.marker.classList.remove('hidden'); 
                els.gaugeLabel.classList.remove('hidden');
                els.marker.style.left = `${percent}%`; 
                els.gaugeLabel.style.left = `${percent}%`;

                Object.values(els.rows).forEach(r => { r.classList.remove('bg-brand-red/10', 'bg-blue-50', 'bg-green-50', 'bg-yellow-50', 'font-bold'); });
                const row = els.rows[activeRowId];
                if (row) {
                    let bg = 'bg-slate-100'; 
                    if (activeRowId === 'under') bg = 'bg-blue-50'; 
                    if (activeRowId === 'normal') bg = 'bg-green-50'; 
                    if (activeRowId === 'over') bg = 'bg-yellow-50'; 
                    if (activeRowId === 'obese') bg = 'bg-red-50';
                    row.classList.add(bg, 'font-bold');
                }
            }

            function resetResult() {
                els.display.textContent = "--.-"; 
                els.catText.textContent = "Enter Details"; 
                els.catText.className = "text-sm font-bold text-slate-400 mt-2";
                els.marker.classList.add('hidden'); 
                els.gaugeLabel.classList.add('hidden');
                els.idealWeight.textContent = "-- - --"; 
                els.weightAdvice.textContent = "Enter height to see range."; 
                els.bmrDisplay.textContent = "--";
                Object.values(els.rows).forEach(r => r.className = "transition-colors");
            }

            if(els.saveBtn) els.saveBtn.addEventListener('click', () => {
                if (els.display.textContent === "--.-") return;
                const presetName = prompt("Name this result (e.g., 'My Jan Checkup'):");
                if (presetName) {
                    let detail = "";
                    const isCmInputVisible = !els.heightGroupCm.classList.contains('hidden');
                    if(isCmInputVisible) detail += `${els.heightCm.value}cm`;
                    else detail += `${els.heightFt.value}'${els.heightIn.value}"`;
                    
                    const isKgInputVisible = !els.weightGroupKg.classList.contains('hidden');
                    if(isKgInputVisible) detail += `, ${els.weightKg.value}kg`;
                    else detail += `, ${els.weightLbs.value}lbs`;

                    const preset = { name: presetName, date: new Date().toISOString(), inputs: detail, calculator: 'BMI Calculator', result: `BMI ${els.display.textContent}`, url: window.location.href };
                    let allPresets = JSON.parse(localStorage.getItem('dailyCalcPresets')) || {};
                    if (!allPresets['Health']) allPresets['Health'] = [];
                    allPresets['Health'].push(preset);
                    localStorage.setItem('dailyCalcPresets', JSON.stringify(allPresets));
                    const originalHtml = els.saveBtn.innerHTML; els.saveBtn.innerHTML = `<i class="fa-solid fa-check text-green-600"></i>`; setTimeout(() => els.saveBtn.innerHTML = originalHtml, 2000);
                }
            });

            if(els.shareBtn) els.shareBtn.addEventListener('click', () => {
                const params = new URLSearchParams();
                
                // Height
                const isCmInputVisible = !els.heightGroupCm.classList.contains('hidden');
                if(isCmInputVisible) {
                     params.set('hu', 'cm');
                     params.set('hc', els.heightCm.value);
                } else {
                     params.set('hu', 'ft');
                     params.set('hf', els.heightFt.value); 
                     params.set('hi', els.heightIn.value); 
                }

                // Weight
                const isKgInputVisible = !els.weightGroupKg.classList.contains('hidden');
                if(isKgInputVisible) {
                    params.set('wu', 'kg');
                    params.set('wk', els.weightKg.value);
                } else {
                    params.set('wu', 'lbs');
                    params.set('wl', els.weightLbs.value);
                }
                
                params.set('a', els.age.value);
                const shareUrl = `${window.location.origin}${window.location.pathname}?${params.toString()}`;
                if (navigator.clipboard && navigator.clipboard.writeText) { navigator.clipboard.writeText(shareUrl).then(showShareSuccess); } else { els.shareInput.value = shareUrl; els.shareInput.classList.remove('hidden'); els.shareInput.select(); document.execCommand('copy'); els.shareInput.classList.add('hidden'); showShareSuccess(); }
            });

            if(els.printBtn) els.printBtn.addEventListener('click', () => {
                window.print();
            });

            function showShareSuccess() { const originalHtml = els.shareBtn.innerHTML; els.shareBtn.innerHTML = `<i class="fa-solid fa-check text-green-600"></i>`; setTimeout(() => els.shareBtn.innerHTML = originalHtml, 2000); }

            const urlParams = new URLSearchParams(window.location.search);
            if(urlParams.has('a')) {
                els.age.value = urlParams.get('a');
                
                // Height
                if(urlParams.has('hu') && urlParams.get('hu') === 'cm') {
                    if(els.heightGroupCm.classList.contains('hidden')) els.btnHeightToggle.click();
                    els.heightCm.value = urlParams.get('hc');
                } else {
                    if(els.heightGroupFt.classList.contains('hidden')) els.btnHeightToggle.click();
                    els.heightFt.value = urlParams.get('hf');
                    els.heightIn.value = urlParams.get('hi');
                }

                // Weight
                if(urlParams.has('wu') && urlParams.get('wu') === 'kg') {
                    if(els.weightGroupKg.classList.contains('hidden')) els.btnWeightToggle.click();
                    els.weightKg.value = urlParams.get('wk');
                } else {
                    if(els.weightGroupLbs.classList.contains('hidden')) els.btnWeightToggle.click();
                    els.weightLbs.value = urlParams.get('wl');
                }
                
                calculate();
            }

            if(els.btn) els.btn.addEventListener('click', calculate);
            if(els.clear) els.clear.addEventListener('click', () => { els.weightLbs.value = ''; els.weightKg.value = ''; els.heightFt.value = ''; els.heightIn.value = ''; els.heightCm.value = ''; resetResult(); });
            [els.weightLbs, els.weightKg, els.heightFt, els.heightIn, els.heightCm, els.age].forEach(i => { if(i) i.addEventListener('input', calculate); });
            Array.from(els.genderRadios).forEach(r => r.addEventListener('change', calculate));
        });
    </script>
</body>
</html>
