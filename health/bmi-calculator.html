<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BMI Calculator & BMR | Healthy Weight & Calories | DailyCalc.org</title>
    <meta name="description" content="Advanced BMI Calculator. Get your Body Mass Index, ideal weight range, and daily BMR calorie needs based on age, gender, and height.">
    
    <!-- Standard Imports -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css">
    
    <link rel="stylesheet" href="../css/global.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="../js/tailwind-config.js"></script>
    <script src="../js/global.js" defer></script>
    <script src="../js/common-layout.js" defer></script>
    
    <!-- SCHEMA MARKUP -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "BMI Calculator",
      "url": "https://dailycalc.org/health/bmi-calculator.html",
      "applicationCategory": "HealthApplication",
      "operatingSystem": "Any",
      "description": "Free BMI Calculator for men and women. Calculate Body Mass Index, ideal weight range, and BMR calories based on age, height, and gender.",
      "browserRequirements": "Requires JavaScript. Works on all modern browsers.",
      "permissions": "None",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "USD"
      },
      "featureList": [
        "BMI Calculation",
        "Ideal Weight Range",
        "BMR (Basal Metabolic Rate)",
        "Interactive Gauge",
        "Imperial and Metric Support"
      ],
      "author": {
        "@type": "Organization",
        "name": "DailyCalc.org"
      }
    }
    </script>
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "FAQPage",
      "mainEntity": [{
        "@type": "Question",
        "name": "Is BMI accurate for athletes?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Not always. BMI does not distinguish between muscle and fat. Athletes with high muscle mass may have a high BMI but very low body fat. In these cases, a Body Fat Calculator is more accurate."
        }
      }, {
        "@type": "Question",
        "name": "What is the \"healthy\" range?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "For most adults, a BMI between 18.5 and 24.9 is considered healthy. This range is associated with the lowest risk of weight-related health issues like diabetes and heart disease."
        }
      }, {
        "@type": "Question",
        "name": "Why does BMI change with age?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Standard BMI categories apply to adults 20+. For children and teens, BMI is age-and-gender specific (percentiles) because they are still growing. Older adults may also have slightly different ideal ranges."
        }
      }, {
        "@type": "Question",
        "name": "Does muscle weigh more than fat?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Technically, a pound is a pound. However, muscle is much more dense than fat. One pound of muscle takes up less space than one pound of fat, which is why you can look leaner but weigh the same."
        }
      }, {
        "@type": "Question",
        "name": "How can I lower my BMI?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "To lower BMI, you need to create a calorie deficit by eating fewer calories than you burn (BMR + Activity). Combining a balanced diet with regular exercise is the safest way to reach a healthy weight."
        }
      }]
    }
    </script>

    <style>
        .bmi-gradient {
            background: linear-gradient(90deg, 
                #3b82f6 0%, #3b82f6 18.5%, 
                #22c55e 18.5%, #22c55e 25%, 
                #eab308 25%, #eab308 30%, 
                #ef4444 30%, #ef4444 100%
            );
        }
        .gauge-marker { transition: left 0.5s cubic-bezier(0.4, 0, 0.2, 1); }
    </style>
</head>
<body class="bg-slate-50 text-slate-900 font-sans antialiased">
    
    <div id="header-placeholder"></div>
    <main id="calculator-layout"></main>

    <!-- TOOL INTERFACE -->
    <div id="tool-slot" class="hidden">
        
        <div class="calc-tool-header">
            <!-- Updated icon to match category card (fa-weight-scale) -->
            <i class="fa-solid fa-weight-scale"></i>
            <span class="text-xs font-medium">BMI, Ideal Weight & Calorie Estimator</span>
        </div>

        <!-- UNIVERSAL LAYOUT WRAPPER -->
        <div class="calc-body-wrapper">
            
            <!-- LEFT: INPUT SECTION -->
            <div class="calc-input-section">
                 
                 <div>
                    <!-- Unit Switcher (Global Preset) -->
                    <div class="flex justify-center mb-4">
                        <div class="inline-flex bg-white rounded-md border border-slate-300 p-0.5 shadow-sm w-full">
                            <label class="cursor-pointer flex-1 text-center py-1.5 rounded text-xs font-bold transition-colors text-brand-dark bg-slate-100 shadow-sm" id="label-imperial">
                                <input type="radio" name="units" value="imperial" checked class="hidden"> US (lbs/ft)
                            </label>
                            <label class="cursor-pointer flex-1 text-center py-1.5 rounded text-xs font-medium transition-colors text-slate-500 hover:text-slate-700" id="label-metric">
                                <input type="radio" name="units" value="metric" class="hidden"> Metric (kg/cm)
                            </label>
                        </div>
                    </div>

                    <!-- Input Grid -->
                    <div class="space-y-4">
                        <!-- Gender -->
                        <div class="flex items-center justify-between">
                            <label class="text-xs font-bold text-slate-700 w-1/3 text-right pr-4">Gender</label>
                            <div class="flex gap-2 w-2/3">
                                <label class="flex-1 cursor-pointer">
                                    <input type="radio" name="gender" value="male" class="peer hidden" checked>
                                    <div class="text-[10px] font-bold text-center py-1.5 border border-slate-300 rounded bg-white text-slate-500 peer-checked:bg-blue-50 peer-checked:text-blue-600 peer-checked:border-blue-300 transition-all">Male</div>
                                </label>
                                <label class="flex-1 cursor-pointer">
                                    <input type="radio" name="gender" value="female" class="peer hidden">
                                    <div class="text-[10px] font-bold text-center py-1.5 border border-slate-300 rounded bg-white text-slate-500 peer-checked:bg-pink-50 peer-checked:text-pink-600 peer-checked:border-pink-300 transition-all">Fem</div>
                                </label>
                            </div>
                        </div>
                        <!-- Age -->
                        <div class="flex items-center justify-between">
                            <label class="text-xs font-bold text-slate-700 w-1/3 text-right pr-4">Age</label>
                            <div class="relative w-2/3">
                                <input type="number" id="age" value="30" class="compact-input pr-8 font-bold text-slate-900 w-full" placeholder="0">
                                <span class="absolute right-2 top-1.5 text-[10px] text-slate-500 font-bold">yrs</span>
                            </div>
                        </div>
                        
                        <!-- Weight (With Unit Selector) -->
                        <div class="flex items-center justify-between">
                            <label class="text-xs font-bold text-slate-700 w-1/3 text-right pr-4">Weight</label>
                            <div class="flex w-2/3 gap-1">
                                <div class="relative flex-1">
                                    <input type="number" id="weight" class="compact-input font-bold text-slate-900 w-full" placeholder="0">
                                </div>
                                <select id="weightUnit" class="compact-select w-16 px-1 text-center bg-white text-slate-900 font-bold border-slate-300 rounded shadow-sm h-7">
                                    <option value="lbs">lbs</option>
                                    <option value="kg">kg</option>
                                </select>
                            </div>
                        </div>

                        <!-- Height (With Unit Selector & Dynamic Inputs) -->
                        <div class="flex items-center justify-between">
                            <label class="text-xs font-bold text-slate-700 w-1/3 text-right pr-4">Height</label>
                            <div class="flex w-2/3 gap-1">
                                <!-- Imperial Inputs (ft/in) -->
                                <div id="heightGroupFt" class="flex flex-1 gap-1">
                                    <div class="relative w-full">
                                        <input type="number" id="heightFt" class="compact-input pr-5 font-bold text-slate-900 w-full" placeholder="0">
                                        <span class="absolute right-1.5 top-1.5 text-[10px] text-slate-500 font-bold">ft</span>
                                    </div>
                                    <div class="relative w-full">
                                        <input type="number" id="heightIn" class="compact-input pr-5 font-bold text-slate-900 w-full" placeholder="0">
                                        <span class="absolute right-1.5 top-1.5 text-[10px] text-slate-500 font-bold">in</span>
                                    </div>
                                </div>
                                <!-- Metric Input (cm) -->
                                <div id="heightGroupCm" class="hidden relative flex-1">
                                    <input type="number" id="heightCm" class="compact-input pr-8 font-bold text-slate-900 w-full" placeholder="0">
                                    <span class="absolute right-2 top-1.5 text-[10px] text-slate-500 font-bold">cm</span>
                                </div>
                                <!-- Unit Selector -->
                                <select id="heightUnit" class="compact-select w-16 px-1 text-center bg-white text-slate-900 font-bold border-slate-300 rounded shadow-sm h-7">
                                    <option value="ft">ft</option>
                                    <option value="cm">cm</option>
                                </select>
                            </div>
                        </div>
                    </div>
                 </div>

                 <!-- Actions -->
                 <div class="mt-6 flex flex-col gap-2">
                    <button type="button" id="calcButton" class="w-full rounded bg-[#518428] py-2.5 text-sm font-bold text-white shadow-md hover:bg-green-700 hover:shadow-lg transition-all focus:ring-2 focus:ring-[#518428] focus:ring-offset-1">CALCULATE</button>
                    <button type="button" id="clearButton" class="text-[11px] text-slate-500 hover:text-brand-red font-semibold text-center underline decoration-slate-300 hover:decoration-brand-red transition-all">Clear & Reset</button>
                 </div>
            </div>

            <!-- RIGHT: OUTPUT SECTION -->
            <div class="calc-output-section">
                 
                 <!-- Top Card -->
                 <div class="rounded-lg border border-slate-400 bg-white shadow-lg overflow-hidden flex flex-col">
                    <div class="result-header">
                        <div><div class="result-label">Your BMI</div><div class="result-value" id="resultDisplay">--.-</div></div>
                        <div class="calc-action-group">
                            <button id="saveBtn" class="calc-action-btn dark" title="Save to Dashboard"><i class="fa-regular fa-bookmark"></i></button>
                            <button id="shareBtn" class="calc-action-btn dark" title="Copy Link"><i class="fa-solid fa-share-nodes"></i></button>
                            <button id="printBtn" class="calc-action-btn dark" title="Print"><i class="fa-solid fa-print"></i></button>
                            <input type="text" id="shareUrlInput" class="hidden">
                        </div>
                    </div>
                    <div class="p-4 bg-white">
                        <div id="resultCategory" class="text-sm font-bold text-slate-400 text-center mb-4">Enter Details</div>
                        <div class="flex-1 w-full flex flex-col justify-center">
                            <!-- Added mt-10 to create vertical space for the popup tooltip so it doesn't overlap text -->
                            <div class="relative h-4 w-full rounded-full bmi-gradient shadow-inner mb-6 mt-10">
                                <div id="gaugeMarker" class="gauge-marker absolute -top-2 left-0 -ml-2 h-0 w-0 border-l-[8px] border-l-transparent border-r-[8px] border-r-transparent border-t-[8px] border-t-slate-800 hidden"></div>
                                 <div id="gaugeLabel" class="gauge-marker absolute -top-8 left-0 -ml-6 w-12 text-center text-[10px] font-bold bg-slate-800 text-white rounded px-1 py-0.5 hidden">
                                    <span id="gaugeValue">--</span>
                                    <div class="absolute bottom-[-4px] left-1/2 -ml-1 h-0 w-0 border-l-[4px] border-l-transparent border-r-[4px] border-r-transparent border-t-[4px] border-t-slate-800"></div>
                                 </div>
                            </div>
                            <div class="flex justify-between text-[9px] font-medium text-slate-500 px-1">
                                <span class="text-blue-600">Under</span><span class="text-green-600 text-center pl-4">Normal</span><span class="text-yellow-600 text-center pr-4">Over</span><span class="text-red-600">Obese</span>
                            </div>
                        </div>
                    </div>
                 </div>

                 <!-- Value-Add Grid -->
                 <div class="grid grid-cols-1 sm:grid-cols-2 gap-3">
                     <div class="bg-white border border-slate-200 rounded p-3 shadow-sm">
                        <div class="flex items-center gap-2 mb-1"><div class="bg-green-100 text-green-600 w-6 h-6 rounded-full flex items-center justify-center text-[10px]"><i class="fa-solid fa-scale-balanced"></i></div><span class="text-xs font-bold text-slate-700">Healthy Weight</span></div>
                        <div class="text-lg font-bold text-slate-900" id="idealWeightDisplay">-- - --</div>
                        <p class="text-[10px] text-slate-500 leading-tight mt-1" id="weightAdvice">Enter height to see range.</p>
                     </div>
                     <div class="bg-white border border-slate-200 rounded p-3 shadow-sm">
                        <div class="flex items-center gap-2 mb-1"><div class="bg-orange-100 text-orange-600 w-6 h-6 rounded-full flex items-center justify-center text-[10px]"><i class="fa-solid fa-fire"></i></div><span class="text-xs font-bold text-slate-700">Daily Burn (BMR)</span></div>
                        <div class="text-lg font-bold text-slate-900" id="bmrDisplay">--</div>
                        <p class="text-[10px] text-slate-500 leading-tight mt-1">Calories/day at rest.</p>
                     </div>
                 </div>

                 <!-- Reference Table -->
                 <div class="flex-1 border border-slate-200 rounded overflow-hidden">
                     <div class="bg-slate-100 px-3 py-2 border-b border-slate-200"><h3 class="text-xs font-bold text-slate-700">Quick Reference</h3></div>
                     <table class="w-full text-xs text-left">
                         <tbody class="divide-y divide-slate-100">
                             <tr id="row-under" class="transition-colors"><td class="px-3 py-2 text-slate-600 font-medium">Underweight</td><td class="px-3 py-2 text-slate-500 text-right">&lt; 18.5</td><td class="px-3 py-2 text-right"><span class="inline-block w-2 h-2 rounded-full bg-blue-500"></span></td></tr>
                             <tr id="row-normal" class="transition-colors"><td class="px-3 py-2 text-slate-600 font-medium">Normal Weight</td><td class="px-3 py-2 text-slate-500 text-right">18.5 – 24.9</td><td class="px-3 py-2 text-right"><span class="inline-block w-2 h-2 rounded-full bg-green-500"></span></td></tr>
                             <tr id="row-over" class="transition-colors"><td class="px-3 py-2 text-slate-600 font-medium">Overweight</td><td class="px-3 py-2 text-slate-500 text-right">25.0 – 29.9</td><td class="px-3 py-2 text-right"><span class="inline-block w-2 h-2 rounded-full bg-yellow-500"></span></td></tr>
                             <tr id="row-obese" class="transition-colors"><td class="px-3 py-2 text-slate-600 font-medium">Obesity</td><td class="px-3 py-2 text-slate-500 text-right">&ge; 30.0</td><td class="px-3 py-2 text-right"><span class="inline-block w-2 h-2 rounded-full bg-red-500"></span></td></tr>
                         </tbody>
                     </table>
                 </div>

            </div>
        </div>
    </div>

    <!-- SEO & GUIDE -->
    <div id="seo-slot" class="hidden">
        <div class="content-section">
            <div class="bg-gradient-to-r from-brand-dark to-brand-red px-4 py-3 border-b border-white/10">
                <h2 class="font-bold text-white">BMI Guide & Charts</h2>
            </div>
            <!-- Using new Universal SEO Wrapper -->
            <div class="calc-seo-content">
                
                <section class="info-card">
                    <h3 class="font-bold text-sm text-brand-dark mb-2 flex items-center gap-2">
                        <i class="fa-solid fa-circle-info text-brand-red"></i> What is Body Mass Index (BMI)?
                    </h3>
                    <p class="mb-3">Body Mass Index (BMI) is a simple screening tool used by doctors and health professionals to estimate the amount of body fat a person has. It calculates a score based on your <strong>weight</strong> in relation to your <strong>height</strong>.</p>
                    
                    <!-- NEW: Formula Section -->
                    <div class="flex flex-wrap justify-center gap-3 mb-4">
                        <div class="bg-white px-4 py-2 rounded border border-slate-200 shadow-sm text-center min-w-[140px]">
                            <span class="text-[10px] font-bold text-slate-500 uppercase tracking-wide block mb-1">Metric Formula</span>
                            <span class="font-serif text-sm text-slate-800 italic font-medium">
                                BMI = kg / m²
                            </span>
                        </div>
                        <div class="bg-white px-4 py-2 rounded border border-slate-200 shadow-sm text-center min-w-[140px]">
                            <span class="text-[10px] font-bold text-slate-500 uppercase tracking-wide block mb-1">Imperial Formula</span>
                            <span class="font-serif text-sm text-slate-800 italic font-medium">
                                BMI = 703 &times; lb / in²
                            </span>
                        </div>
                    </div>

                    <p class="mb-2">While it doesn't measure body fat directly, BMI is widely used because it's a quick, non-invasive way to categorize weight and screen for potential health risks related to obesity or being underweight.</p>
                </section>

                <!-- NEW: Why Use Section (Inspired by Competitor) -->
                <section class="info-card">
                    <h3 class="font-bold text-sm text-brand-dark mb-3 flex items-center gap-2">
                        <i class="fa-solid fa-bullseye text-[#518428]"></i> Why Monitor Your BMI?
                    </h3>
                    <div class="grid sm:grid-cols-3 gap-4 text-xs text-slate-600">
                        <div class="bg-white p-3 rounded border border-slate-200 shadow-sm">
                            <strong class="block text-slate-800 mb-1">Health Assessment</strong>
                            Quickly identify if your weight is putting you at risk for chronic diseases.
                        </div>
                        <div class="bg-white p-3 rounded border border-slate-200 shadow-sm">
                            <strong class="block text-slate-800 mb-1">Fitness Goals</strong>
                            Set realistic targets for weight loss or muscle gain based on medical standards.
                        </div>
                        <div class="bg-white p-3 rounded border border-slate-200 shadow-sm">
                            <strong class="block text-slate-800 mb-1">Medical Dosage</strong>
                            Doctors often use BMI to determine the correct dosage for certain medications.
                        </div>
                    </div>
                </section>

                <section class="info-card">
                    <h3 class="font-bold text-sm text-brand-dark mb-3 flex items-center gap-2"><i class="fa-solid fa-table text-brand-red"></i> BMI Table for Adults</h3>
                    <p class="mb-3">For most adults (ages 20+), BMI scores fall into standard weight categories established by the World Health Organization (WHO). Use this table to interpret your result:</p>
                    <div class="overflow-x-auto border border-slate-200 rounded-lg shadow-sm bg-white">
                        <table class="w-full text-left border-collapse">
                            <thead><tr class="bg-slate-100 border-b border-slate-200 text-slate-700"><th class="px-3 py-2 font-bold">Category</th><th class="px-3 py-2 font-bold">BMI Range (kg/m²)</th><th class="px-3 py-2 font-bold">Health Risk Level</th></tr></thead>
                            <tbody class="divide-y divide-slate-100">
                                <tr class="hover:bg-blue-50/50 transition-colors"><td class="px-3 py-2 font-medium text-blue-700"><span class="inline-block w-2 h-2 rounded-full bg-blue-500 mr-2"></span>Underweight</td><td class="px-3 py-2">Below 18.5</td><td class="px-3 py-2 text-slate-500">Minimal / Nutrition risk</td></tr>
                                <tr class="hover:bg-green-50/50 transition-colors"><td class="px-3 py-2 font-medium text-green-700"><span class="inline-block w-2 h-2 rounded-full bg-green-500 mr-2"></span>Normal Weight</td><td class="px-3 py-2 font-bold text-slate-800">18.5 – 24.9</td><td class="px-3 py-2 text-slate-500">Low Risk</td></tr>
                                <tr class="hover:bg-yellow-50/50 transition-colors"><td class="px-3 py-2 font-medium text-yellow-700"><span class="inline-block w-2 h-2 rounded-full bg-yellow-500 mr-2"></span>Overweight</td><td class="px-3 py-2">25.0 – 29.9</td><td class="px-3 py-2 text-slate-500">Increased Risk</td></tr>
                                <tr class="hover:bg-red-50/50 transition-colors"><td class="px-3 py-2 font-medium text-red-600"><span class="inline-block w-2 h-2 rounded-full bg-red-500 mr-2"></span>Obesity Class I</td><td class="px-3 py-2">30.0 – 34.9</td><td class="px-3 py-2 text-slate-500">High Risk</td></tr>
                                <tr class="hover:bg-red-50/50 transition-colors"><td class="px-3 py-2 font-medium text-red-700"><span class="inline-block w-2 h-2 rounded-full bg-red-700 mr-2"></span>Obesity Class II</td><td class="px-3 py-2">35.0 – 39.9</td><td class="px-3 py-2 text-slate-500">Very High Risk</td></tr>
                                <tr class="hover:bg-red-50/50 transition-colors"><td class="px-3 py-2 font-medium text-red-900"><span class="inline-block w-2 h-2 rounded-full bg-red-900 mr-2"></span>Obesity Class III</td><td class="px-3 py-2">40.0 and above</td><td class="px-3 py-2 text-slate-500">Extremely High Risk</td></tr>
                            </tbody>
                        </table>
                    </div>
                </section>

                <div class="grid md:grid-cols-2 gap-6">
                    <section class="info-card">
                        <h3 class="font-bold text-sm text-brand-dark mb-2 flex items-center gap-2"><i class="fa-solid fa-arrow-trend-up text-red-500"></i> Risks of High BMI</h3>
                        <p class="mb-2">Being overweight puts extra strain on your body. Common risks include:</p>
                        <ul class="list-disc pl-5 space-y-1 text-slate-600 text-xs">
                            <li>High blood pressure (Hypertension)</li>
                            <li>Type 2 Diabetes</li>
                            <li><strong>Heart disease</strong> and stroke</li>
                            <li>Osteoarthritis (joint pain)</li>
                            <li>Sleep apnea and breathing problems</li>
                            <li>Gallbladder disease</li>
                        </ul>
                    </section>
                    <section class="info-card">
                        <h3 class="font-bold text-sm text-brand-dark mb-2 flex items-center gap-2"><i class="fa-solid fa-arrow-trend-down text-blue-500"></i> Risks of Low BMI</h3>
                        <p class="mb-2">Being underweight can also be dangerous:</p>
                        <ul class="list-disc pl-5 space-y-1 text-slate-600 text-xs">
                            <li>Malnutrition and vitamin deficiencies</li>
                            <li>Weakened immune system</li>
                            <li>Osteoporosis (weak bones)</li>
                            <li>Fertility issues</li>
                            <li>Anemia and fatigue</li>
                        </ul>
                    </section>
                </div>

                <!-- NEW: BMR Section (Valuable Addition) -->
                <section class="info-card">
                    <h3 class="font-bold text-sm text-brand-dark mb-2 flex items-center gap-2">
                        <i class="fa-solid fa-fire text-orange-500"></i> Bonus: Understanding BMR
                    </h3>
                    <p class="mb-3">This calculator also provides your <strong>BMR (Basal Metabolic Rate)</strong>. This is the number of calories your body burns while at complete rest to maintain basic functions like breathing and digestion.</p>
                    <div class="bg-orange-50 border border-orange-100 p-3 rounded text-xs text-orange-900">
                        <strong>How to use it:</strong> To maintain your current weight, eat calories equal to your BMR + Activity Level. To lose weight, eat slightly less than this total.
                    </div>
                </section>

                <section class="info-card bg-blue-50/50 border-blue-200">
                    <h3 class="font-bold text-sm text-brand-dark mb-2 flex items-center gap-2"><i class="fa-solid fa-users-viewfinder text-brand-red"></i> Limitations & Exceptions</h3>
                    <p class="mb-4">BMI is a useful screening tool, but it doesn't tell the whole story. It is not accurate for:</p>
                    
                    <div class="space-y-3">
                        <div class="flex gap-3 items-start">
                            <div class="bg-white p-1.5 rounded border border-slate-200 text-brand-dark"><i class="fa-solid fa-dumbbell"></i></div>
                            <div>
                                <strong class="text-xs text-brand-dark block">Athletes & Bodybuilders</strong>
                                <span class="text-[11px] text-slate-600">Muscle is denser than fat. Athletes may have a high BMI but low body fat.</span>
                            </div>
                        </div>
                        <div class="flex gap-3 items-start">
                            <div class="bg-white p-1.5 rounded border border-slate-200 text-brand-dark"><i class="fa-solid fa-child"></i></div>
                            <div>
                                <strong class="text-xs text-brand-dark block">Children & Teens (2-19)</strong>
                                <span class="text-[11px] text-slate-600">Kids are still growing. Their BMI must be compared against age-and-gender percentiles (growth charts), not the adult table above.</span>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- FAQ Section (Existing) -->
                <section class="info-card">
                    <!-- ... existing FAQ content ... -->
                    <h3 class="font-bold text-slate-800 mb-3 flex items-center gap-2">
                        <i class="fa-solid fa-circle-question text-[#518428]"></i> Frequently Asked Questions
                    </h3>
                    <div class="space-y-4">
                        <!-- Q1 -->
                        <div class="flex gap-3 items-start">
                            <div class="flex-shrink-0 w-5 h-5 rounded-full bg-slate-100 text-slate-600 flex items-center justify-center text-[10px] font-bold border border-slate-200 mt-0.5">1</div>
                            <div>
                                <h4 class="text-[12px] font-bold text-brand-dark mb-1 leading-tight">Is BMI accurate for athletes?</h4>
                                <p class="text-xs text-slate-600">Not always. BMI does not distinguish between muscle and fat. Athletes with high muscle mass may have a high BMI but very low body fat. In these cases, a Body Fat Calculator is more accurate.</p>
                            </div>
                        </div>
                        <!-- Q2 -->
                        <div class="flex gap-3 items-start">
                            <div class="flex-shrink-0 w-5 h-5 rounded-full bg-slate-100 text-slate-600 flex items-center justify-center text-[10px] font-bold border border-slate-200 mt-0.5">2</div>
                            <div>
                                <h4 class="text-[12px] font-bold text-brand-dark mb-1 leading-tight">What is the "healthy" range?</h4>
                                <p class="text-xs text-slate-600">For most adults, a BMI between <strong>18.5 and 24.9</strong> is considered healthy. This range is associated with the lowest risk of weight-related health issues like diabetes and heart disease.</p>
                            </div>
                        </div>
                        <!-- Q3 -->
                        <div class="flex gap-3 items-start">
                            <div class="flex-shrink-0 w-5 h-5 rounded-full bg-slate-100 text-slate-600 flex items-center justify-center text-[10px] font-bold border border-slate-200 mt-0.5">3</div>
                            <div>
                                <h4 class="text-[12px] font-bold text-brand-dark mb-1 leading-tight">Why does BMI change with age?</h4>
                                <p class="text-xs text-slate-600">Standard BMI categories apply to adults 20+. For children and teens, BMI is age-and-gender specific (percentiles) because they are still growing. Older adults may also have slightly different ideal ranges.</p>
                            </div>
                        </div>
                        <!-- Q4 -->
                        <div class="flex gap-3 items-start">
                            <div class="flex-shrink-0 w-5 h-5 rounded-full bg-slate-100 text-slate-600 flex items-center justify-center text-[10px] font-bold border border-slate-200 mt-0.5">4</div>
                            <div>
                                <h4 class="text-[12px] font-bold text-brand-dark mb-1 leading-tight">Does muscle weigh more than fat?</h4>
                                <p class="text-xs text-slate-600">Technically, a pound is a pound. However, muscle is much more <em>dense</em> than fat. One pound of muscle takes up less space than one pound of fat, which is why you can look leaner but weigh the same.</p>
                            </div>
                        </div>
                        <!-- Q5 -->
                        <div class="flex gap-3 items-start">
                            <div class="flex-shrink-0 w-5 h-5 rounded-full bg-slate-100 text-slate-600 flex items-center justify-center text-[10px] font-bold border border-slate-200 mt-0.5">5</div>
                            <div>
                                <h4 class="text-[12px] font-bold text-brand-dark mb-1 leading-tight">How can I lower my BMI?</h4>
                                <p class="text-xs text-slate-600">To lower BMI, you need to create a calorie deficit by eating fewer calories than you burn (BMR + Activity). Combining a balanced diet with regular exercise is the safest way to reach a healthy weight.</p>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </div>
    </div>
    
    <div id="footer-placeholder"></div>

    <!-- LOGIC -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            if (typeof CalculatorLayout !== 'undefined') {
                CalculatorLayout.render({ title: "BMI Calculator", category: "Health", toolId: "tool-slot", seoId: "seo-slot" });
            }
            const els = {
                radios: document.getElementsByName('units'),
                labels: { imperial: document.getElementById('label-imperial'), metric: document.getElementById('label-metric') },
                genderRadios: document.getElementsByName('gender'),
                age: document.getElementById('age'),
                weight: document.getElementById('weight'),
                weightUnit: document.getElementById('weightUnit'), // Local select
                heightFt: document.getElementById('heightFt'),
                heightIn: document.getElementById('heightIn'),
                heightCm: document.getElementById('heightCm'),
                heightUnit: document.getElementById('heightUnit'), // Local select
                heightGroupFt: document.getElementById('heightGroupFt'), // Wrapper
                heightGroupCm: document.getElementById('heightGroupCm'), // Wrapper
                btn: document.getElementById('calcButton'),
                clear: document.getElementById('clearButton'),
                display: document.getElementById('resultDisplay'),
                catText: document.getElementById('resultCategory'),
                marker: document.getElementById('gaugeMarker'),
                gaugeLabel: document.getElementById('gaugeLabel'),
                gaugeValue: document.getElementById('gaugeValue'),
                idealWeight: document.getElementById('idealWeightDisplay'),
                weightAdvice: document.getElementById('weightAdvice'),
                bmrDisplay: document.getElementById('bmrDisplay'),
                rows: { under: document.getElementById('row-under'), normal: document.getElementById('row-normal'), over: document.getElementById('row-over'), obese: document.getElementById('row-obese') },
                saveBtn: document.getElementById('saveBtn'),
                shareBtn: document.getElementById('shareBtn'),
                printBtn: document.getElementById('printBtn'),
                shareInput: document.getElementById('shareUrlInput')
            };

            // Toggle Global Units (Presets)
            function toggleGlobalUnits() {
                const isMetric = Array.from(els.radios).find(r => r.checked).value === 'metric';
                if (isMetric) {
                    // Update Styles
                    els.labels.metric.classList.add('bg-slate-100', 'shadow-sm', 'text-brand-dark', 'font-bold'); 
                    els.labels.metric.classList.remove('text-slate-500', 'font-medium');
                    els.labels.imperial.classList.remove('bg-slate-100', 'shadow-sm', 'text-brand-dark', 'font-bold'); 
                    els.labels.imperial.classList.add('text-slate-500', 'font-medium');
                    
                    // Set Local Dropdowns
                    els.weightUnit.value = 'kg';
                    els.heightUnit.value = 'cm';
                } else {
                    // Update Styles
                    els.labels.imperial.classList.add('bg-slate-100', 'shadow-sm', 'text-brand-dark', 'font-bold'); 
                    els.labels.imperial.classList.remove('text-slate-500', 'font-medium');
                    els.labels.metric.classList.remove('bg-slate-100', 'shadow-sm', 'text-brand-dark', 'font-bold'); 
                    els.labels.metric.classList.add('text-slate-500', 'font-medium');
                    
                    // Set Local Dropdowns
                    els.weightUnit.value = 'lbs';
                    els.heightUnit.value = 'ft';
                }
                updateVisibility();
                calculate();
            }

            // Update Visibility based on Local Dropdowns
            function updateVisibility() {
                // Height
                if (els.heightUnit.value === 'ft') {
                    els.heightGroupFt.classList.remove('hidden');
                    els.heightGroupCm.classList.add('hidden');
                } else {
                    els.heightGroupFt.classList.add('hidden');
                    els.heightGroupCm.classList.remove('hidden');
                }
            }

            els.radios.forEach(r => r.addEventListener('change', toggleGlobalUnits));
            els.heightUnit.addEventListener('change', () => { updateVisibility(); calculate(); });
            els.weightUnit.addEventListener('change', calculate);

            function calculate() {
                const gender = Array.from(els.genderRadios).find(r => r.checked).value;
                const age = parseFloat(els.age.value) || 0;
                let weightVal = parseFloat(els.weight.value);
                
                if (!weightVal || weightVal <= 0) { resetResult(); return; }

                // Get Height (Normalized to Meters)
                let heightM = 0;
                let heightCmVal = 0;

                if (els.heightUnit.value === 'cm') {
                    let cm = parseFloat(els.heightCm.value); 
                    if (!cm) { resetResult(); return; }
                    heightCmVal = cm; 
                    heightM = cm / 100;
                } else {
                    let ft = parseFloat(els.heightFt.value) || 0; 
                    let inch = parseFloat(els.heightIn.value) || 0;
                    if (ft === 0 && inch === 0) { resetResult(); return; }
                    let totalInches = (ft * 12) + inch; 
                    heightCmVal = totalInches * 2.54; 
                    heightM = heightCmVal / 100;
                }

                // Get Weight (Normalized to Kg)
                let weightKg = (els.weightUnit.value === 'kg') ? weightVal : (weightVal * 0.453592);

                let bmi = weightKg / (heightM * heightM);
                displayBMI(bmi);

                // Ideal Weight Range
                let minKg = 18.5 * (heightM * heightM); 
                let maxKg = 24.9 * (heightM * heightM);
                let rangeText = ""; 
                let adviceText = "";

                // Display Ideal Weight in selected unit
                if (els.weightUnit.value === 'kg') {
                    rangeText = `${minKg.toFixed(1)} - ${maxKg.toFixed(1)} kg`;
                    if (weightKg < minKg) adviceText = `Gain ${(minKg - weightKg).toFixed(1)} kg`; 
                    else if (weightKg > maxKg) adviceText = `Lose ${(weightKg - maxKg).toFixed(1)} kg`; 
                    else adviceText = "You are in the healthy range!";
                } else {
                    let minLbs = minKg * 2.20462; 
                    let maxLbs = maxKg * 2.20462;
                    rangeText = `${Math.round(minLbs)} - ${Math.round(maxLbs)} lbs`;
                    if (weightVal < minLbs) adviceText = `Gain ${Math.round(minLbs - weightVal)} lbs`; 
                    else if (weightVal > maxLbs) adviceText = `Lose ${Math.round(weightVal - maxLbs)} lbs`; 
                    else adviceText = "You are in the healthy range!";
                }
                els.idealWeight.textContent = rangeText; 
                els.weightAdvice.textContent = adviceText;

                // BMR Calc (Mifflin-St Jeor)
                let bmr = (10 * weightKg) + (6.25 * heightCmVal) - (5 * age);
                if (gender === 'male') bmr += 5; else bmr -= 161;
                els.bmrDisplay.textContent = Math.round(bmr).toLocaleString();
            }

            function displayBMI(bmi) {
                if (!isFinite(bmi) || isNaN(bmi) || bmi <= 0) { resetResult(); return; }
                const val = bmi.toFixed(1);
                els.display.textContent = val; 
                els.gaugeValue.textContent = val;

                let category = ""; let colorClass = ""; let activeRowId = ""; let percent = 0;
                const minScale = 14; const maxScale = 35;
                percent = ((bmi - minScale) / (maxScale - minScale)) * 100;
                if (percent < 0) percent = 0; if (percent > 100) percent = 100;

                if (bmi < 18.5) { category = "Underweight"; colorClass = "text-blue-600"; activeRowId = "under"; }
                else if (bmi < 25) { category = "Normal Weight"; colorClass = "text-green-600"; activeRowId = "normal"; }
                else if (bmi < 30) { category = "Overweight"; colorClass = "text-yellow-600"; activeRowId = "over"; }
                else { category = "Obesity"; colorClass = "text-red-600"; activeRowId = "obese"; }

                els.catText.textContent = category; 
                els.catText.className = `text-sm font-bold mt-2 ${colorClass}`;
                els.marker.classList.remove('hidden'); 
                els.gaugeLabel.classList.remove('hidden');
                els.marker.style.left = `${percent}%`; 
                els.gaugeLabel.style.left = `${percent}%`;

                Object.values(els.rows).forEach(r => { r.classList.remove('bg-brand-red/10', 'bg-blue-50', 'bg-green-50', 'bg-yellow-50', 'font-bold'); });
                const row = els.rows[activeRowId];
                if (row) {
                    let bg = 'bg-slate-100'; 
                    if (activeRowId === 'under') bg = 'bg-blue-50'; 
                    if (activeRowId === 'normal') bg = 'bg-green-50'; 
                    if (activeRowId === 'over') bg = 'bg-yellow-50'; 
                    if (activeRowId === 'obese') bg = 'bg-red-50';
                    row.classList.add(bg, 'font-bold');
                }
            }

            function resetResult() {
                els.display.textContent = "--.-"; 
                els.catText.textContent = "Enter Details"; 
                els.catText.className = "text-sm font-bold text-slate-400 mt-2";
                els.marker.classList.add('hidden'); 
                els.gaugeLabel.classList.add('hidden');
                els.idealWeight.textContent = "-- - --"; 
                els.weightAdvice.textContent = "Enter height to see range."; 
                els.bmrDisplay.textContent = "--";
                Object.values(els.rows).forEach(r => r.className = "transition-colors");
            }

            if(els.saveBtn) els.saveBtn.addEventListener('click', () => {
                if (els.display.textContent === "--.-") return;
                const presetName = prompt("Name this result (e.g., 'My Jan Checkup'):");
                if (presetName) {
                    // Logic updated to save based on current select values, not global
                    let detail = "";
                    if(els.heightUnit.value === 'cm') detail += `${els.heightCm.value}cm`;
                    else detail += `${els.heightFt.value}'${els.heightIn.value}"`;
                    
                    detail += `, ${els.weight.value}${els.weightUnit.value}`;

                    const preset = { name: presetName, date: new Date().toISOString(), inputs: detail, calculator: 'BMI Calculator', result: `BMI ${els.display.textContent}`, url: window.location.href };
                    let allPresets = JSON.parse(localStorage.getItem('dailyCalcPresets')) || {};
                    if (!allPresets['Health']) allPresets['Health'] = [];
                    allPresets['Health'].push(preset);
                    localStorage.setItem('dailyCalcPresets', JSON.stringify(allPresets));
                    const originalHtml = els.saveBtn.innerHTML; els.saveBtn.innerHTML = `<i class="fa-solid fa-check text-green-600"></i>`; setTimeout(() => els.saveBtn.innerHTML = originalHtml, 2000);
                }
            });

            if(els.shareBtn) els.shareBtn.addEventListener('click', () => {
                const params = new URLSearchParams();
                params.set('w', els.weight.value); 
                params.set('wu', els.weightUnit.value);
                params.set('hu', els.heightUnit.value);
                params.set('hf', els.heightFt.value); 
                params.set('hi', els.heightIn.value); 
                params.set('hc', els.heightCm.value); 
                params.set('a', els.age.value);
                const shareUrl = `${window.location.origin}${window.location.pathname}?${params.toString()}`;
                if (navigator.clipboard && navigator.clipboard.writeText) { navigator.clipboard.writeText(shareUrl).then(showShareSuccess); } else { els.shareInput.value = shareUrl; els.shareInput.classList.remove('hidden'); els.shareInput.select(); document.execCommand('copy'); els.shareInput.classList.add('hidden'); showShareSuccess(); }
            });

            if(els.printBtn) els.printBtn.addEventListener('click', () => {
                window.print();
            });

            function showShareSuccess() { const originalHtml = els.shareBtn.innerHTML; els.shareBtn.innerHTML = `<i class="fa-solid fa-check text-green-600"></i>`; setTimeout(() => els.shareBtn.innerHTML = originalHtml, 2000); }

            const urlParams = new URLSearchParams(window.location.search);
            if(urlParams.has('w')) {
                els.weight.value = urlParams.get('w'); 
                if(urlParams.get('a')) els.age.value = urlParams.get('a');
                
                // Set units from params if available, else infer from old 'u' param or default
                if(urlParams.has('wu')) els.weightUnit.value = urlParams.get('wu');
                if(urlParams.has('hu')) els.heightUnit.value = urlParams.get('hu');
                else if(urlParams.has('u')) {
                     // Backwards compatibility
                     if(urlParams.get('u') === 'metric') { els.weightUnit.value = 'kg'; els.heightUnit.value = 'cm'; }
                     else { els.weightUnit.value = 'lbs'; els.heightUnit.value = 'ft'; }
                }

                // Set Inputs
                if(els.heightUnit.value === 'cm' && urlParams.get('hc')) els.heightCm.value = urlParams.get('hc');
                if(els.heightUnit.value === 'ft') {
                    if(urlParams.get('hf')) els.heightFt.value = urlParams.get('hf');
                    if(urlParams.get('hi')) els.heightIn.value = urlParams.get('hi');
                }
                
                updateVisibility();
                calculate();
            }

            if(els.btn) els.btn.addEventListener('click', calculate);
            if(els.clear) els.clear.addEventListener('click', () => { els.weight.value = ''; els.heightFt.value = ''; els.heightIn.value = ''; els.heightCm.value = ''; resetResult(); });
            [els.weight, els.heightFt, els.heightIn, els.heightCm, els.age].forEach(i => { if(i) i.addEventListener('input', calculate); });
            Array.from(els.genderRadios).forEach(r => r.addEventListener('change', calculate));
        });
    </script>
</body>
</html>
